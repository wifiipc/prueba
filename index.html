<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mundo M√°gico ‚ù§Ô∏è</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;700&family=Dancing+Script:wght@700&display=swap');

        :root {
            --dark-color: #030308;
            --flower-color: #6bf0ff;
            --accent-color: #ff4d6d;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: var(--dark-color);
            color: white;
            font-family: 'Montserrat', sans-serif;
            overflow: hidden; /* El scroll lo manejaremos internamente */
            height: 100vh;
            width: 100vw;
        }

        /* --- CONTENEDOR DEL MUNDO (EL CAMPO) --- */
        #world {
            position: relative;
            width: 300vw; /* Tres veces el ancho de pantalla para desplazarnos */
            height: 100vh;
            display: flex;
            transition: transform 0.8s cubic-bezier(0.2, 0.8, 0.2, 1);
            will-change: transform;
        }

        /* --- FONDO FIJO (CIELO) --- */
        .night-sky {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: radial-gradient(ellipse at bottom, #1b2735 0%, #090a0f 100%);
            z-index: -1;
        }

        /* --- ESTRELLAS --- */
        #starCanvas {
            position: fixed;
            top: 0; left: 0;
            z-index: 0;
            pointer-events: none;
        }

        /* --- ELEMENTOS DE LA PRADERA --- */
        .section {
            width: 100vw;
            height: 100vh;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .grass-layer {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 40vh;
            pointer-events: none;
            z-index: 5;
        }

        /* --- INTERFAZ DE NAVEGACI√ìN --- */
        .nav-ui {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            display: flex;
            gap: 20px;
        }

        .nav-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 12px 20px;
            border-radius: 30px;
            cursor: pointer;
            backdrop-filter: blur(10px);
            transition: 0.3s;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .nav-btn.active {
            background: var(--accent-color);
            border-color: var(--accent-color);
            box-shadow: 0 0 15px var(--accent-color);
        }

        /* --- FLORES ANIMADAS (CSS PURO) --- */
        .flower-container {
            position: absolute;
            bottom: 0;
            transform-origin: bottom center;
            animation: sway 4s ease-in-out infinite alternate;
        }

        .stem {
            width: 2px;
            height: 80px;
            background: linear-gradient(to top, #0f2a0f, #23f0ff);
            margin: 0 auto;
        }

        .glow-bloom {
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            filter: blur(2px);
            box-shadow: 0 0 15px var(--flower-color), 0 0 30px var(--flower-color);
        }

        @keyframes sway {
            0% { transform: rotate(-3deg) translateX(-2px); }
            100% { transform: rotate(3deg) translateX(2px); }
        }

        /* --- PANTALLAS DE CONTENIDO (OVERLAYS) --- */
        .overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 2000;
            display: none;
            opacity: 0;
            transition: 0.5s;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .overlay.show {
            display: flex;
            opacity: 1;
        }

        .close-btn {
            position: absolute;
            top: 30px; right: 30px;
            font-size: 2rem;
            cursor: pointer;
        }
    </style>
</head>
    <body>

    <div class="night-sky"></div>
    <canvas id="starCanvas"></canvas>

    <div class="nav-ui">
        <div class="nav-btn active" onclick="moveWorld(0)">Inicio</div>
        <div class="nav-btn" onclick="moveWorld(1)">Galer√≠a</div>
        <div class="nav-btn" onclick="moveWorld(2)">Carta</div>
    </div>

    <div id="world">
        
        <section class="section">
            <h1 style="font-family: 'Dancing Script'; font-size: 4rem; text-shadow: 0 0 20px var(--flower-color);">
                Mundo de Flores
            </h1>
            <p style="opacity: 0.7; margin-top: 10px;">Desliza para explorar nuestro jard√≠n...</p>
            <div id="grass-1" class="grass-layer"></div>
        </section>

        <section class="section">
            <div class="station-icon" onclick="openOverlay('gallery-overlay')" style="cursor:pointer; text-align: center;">
                <div class="glow-bloom" style="width: 80px; height: 80px; margin-bottom: 20px; animation: pulse 2s infinite;"></div>
                <h2>Nuestros Recuerdos</h2>
                <p>(Toca para abrir)</p>
            </div>
            <div id="grass-2" class="grass-layer"></div>
        </section>

        <section class="section">
            <div class="station-icon" onclick="openOverlay('letter-overlay')" style="cursor:pointer; text-align: center;">
                <div class="glow-bloom" style="width: 80px; height: 80px; margin-bottom: 20px; background: var(--accent-color); box-shadow: 0 0 30px var(--accent-color);"></div>
                <h2>Una Carta para ti</h2>
                <p>(Toca para leer)</p>
            </div>
            <div id="grass-3" class="grass-layer"></div>
        </section>

    </div>

    <div style="position: fixed; top: 20px; left: 20px; z-index: 1000;">
        <button class="nav-btn" onclick="toggleMusic()" id="music-btn">üéµ Play Playlist</button>
        <audio id="bg-music" loop>
            <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
        </audio>
    </div>

    <div id="gallery-overlay" class="overlay">
        <div class="close-btn" onclick="closeOverlay('gallery-overlay')">‚úï</div>
        <h2 style="margin-bottom: 30px; font-family: 'Pacifico';">Nuestra Galer√≠a</h2>
        <div style="display: flex; gap: 15px; overflow-x: auto; width: 90%; padding: 20px;">
            <img src="https://via.placeholder.com/200x300/6bf0ff/fff?text=Foto+1" style="border-radius: 15px; box-shadow: 0 0 20px var(--flower-color);">
            <img src="https://via.placeholder.com/200x300/ff4d6d/fff?text=Foto+2" style="border-radius: 15px; box-shadow: 0 0 20px var(--accent-color);">
            <img src="https://via.placeholder.com/200x300/6bf0ff/fff?text=Foto+3" style="border-radius: 15px; box-shadow: 0 0 20px var(--flower-color);">
        </div>
    </div>

    <div id="letter-overlay" class="overlay">
        <div class="close-btn" onclick="closeOverlay('letter-overlay')">‚úï</div>
        <div style="background: white; color: #333; padding: 40px; border-radius: 5px; width: 80%; max-width: 500px; font-family: 'Dancing Script'; font-size: 1.5rem; text-align: center; box-shadow: 0 0 50px rgba(255,255,255,0.2);">
            <p>"Eres la flor m√°s bella de este jard√≠n.<br>Gracias por caminar a mi lado en este universo infinito."</p>
            <br>
            <p style="font-size: 1rem; font-family: 'Montserrat'; color: var(--accent-color);">Te amo ‚ù§Ô∏è</p>
        </div>
    </div>

    <style>
        /* Estilos extra para las estaciones */
        @keyframes pulse {
            0% { transform: scale(1); opacity: 0.8; box-shadow: 0 0 10px var(--flower-color); }
            50% { transform: scale(1.1); opacity: 1; box-shadow: 0 0 30px var(--flower-color); }
            100% { transform: scale(1); opacity: 0.8; box-shadow: 0 0 10px var(--flower-color); }
        }
    </style>
        <script>
        /* =========================================
           1. GENERADOR DE FLORES Y HIERBA
           ========================================= */
        function initMeadow() {
            // Generamos flores para las 3 secciones de la pradera
            for (let s = 1; s <= 3; s++) {
                const container = document.getElementById(`grass-${s}`);
                const flowerCount = 40; // Cantidad de flores por secci√≥n

                for (let i = 0; i < flowerCount; i++) {
                    createFlower(container);
                }
            }
        }

        function createFlower(container) {
            const flower = document.createElement('div');
            flower.className = 'flower-container';
            
            // Posici√≥n aleatoria
            const x = Math.random() * 100;
            const y = Math.random() * 50; // Variaci√≥n en profundidad visual
            
            flower.style.left = `${x}%`;
            flower.style.bottom = `${y}px`;
            
            // Variaci√≥n de tama√±o y velocidad de balanceo
            const scale = 0.5 + Math.random() * 0.8;
            const delay = Math.random() * -5;
            const duration = 3 + Math.random() * 3;
            
            flower.style.transform = `scale(${scale})`;
            flower.style.animationDelay = `${delay}s`;
            flower.style.animationDuration = `${duration}s`;

            // Color aleatorio entre azul ne√≥n y rosa ne√≥n
            const isPink = Math.random() > 0.7;
            const color = isPink ? 'var(--accent-color)' : 'var(--flower-color)';

            flower.innerHTML = `
                <div class="glow-bloom" style="box-shadow: 0 0 15px ${color}, 0 0 30px ${color}; background: ${isPink ? '#fff' : '#fff'}"></div>
                <div class="stem" style="height: ${60 + Math.random() * 60}px; background: linear-gradient(to top, #0f2a0f, ${color})"></div>
            `;

            container.appendChild(flower);
        }

        /* =========================================
           2. SISTEMA DE NAVEGACI√ìN (MOVE WORLD)
           ========================================= */
        function moveWorld(index) {
            const world = document.getElementById('world');
            const btns = document.querySelectorAll('.nav-btn');
            
            // Desplazar el contenedor principal
            world.style.transform = `translateX(-${index * 100}vw)`;
            
            // Actualizar botones de navegaci√≥n
            btns.forEach((btn, i) => {
                if(i === index) btn.classList.add('active');
                else btn.classList.remove('active');
            });
        }

        /* =========================================
           3. ESTRELLAS DE FONDO (CANVAS)
           ========================================= */
        const canvas = document.getElementById('starCanvas');
        const ctx = canvas.getContext('2d');
        let stars = [];

        function initStars() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            stars = [];
            for (let i = 0; i < 200; i++) {
                stars.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    size: Math.random() * 1.5,
                    opacity: Math.random(),
                    speed: 0.01 + Math.random() * 0.03
                });
            }
        }

        function drawStars() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = "white";
            stars.forEach(s => {
                s.opacity += s.speed;
                if (s.opacity > 1 || s.opacity < 0) s.speed *= -1;
                ctx.globalAlpha = Math.abs(s.opacity);
                ctx.beginPath();
                ctx.arc(s.x, s.y, s.size, 0, Math.PI * 2);
                ctx.fill();
            });
            requestAnimationFrame(drawStars);
        }

        /* =========================================
           4. L√ìGICA DE INTERFAZ (MODALES Y M√öSICA)
           ========================================= */
        function openOverlay(id) {
            document.getElementById(id).style.display = 'flex';
            setTimeout(() => document.getElementById(id).classList.add('show'), 10);
        }

        function closeOverlay(id) {
            document.getElementById(id).classList.remove('show');
            setTimeout(() => document.getElementById(id).style.display = 'none', 500);
        }

        function toggleMusic() {
            const audio = document.getElementById('bg-music');
            const btn = document.getElementById('music-btn');
            if (audio.paused) {
                audio.play();
                btn.innerText = "‚è∏ Pause Playlist";
            } else {
                audio.pause();
                btn.innerText = "üéµ Play Playlist";
            }
        }

        // Eventos al cargar
        window.onload = () => {
            initMeadow();
            initStars();
            drawStars();
        };

        // Re-ajustar estrellas si cambia el tama√±o de pantalla
        window.onresize = initStars;

    </script>
</body>
</html>
