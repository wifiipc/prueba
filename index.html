<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>LoveFlix ‚ù§Ô∏è</title>
    <style>
        /* --- FUENTES --- */
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;500;700;900&family=Bebas+Neue&family=Dancing+Script:wght@700&family=Pacifico&display=swap');

        /* --- RESET & BASE --- */
        body {
            margin: 0;
            background-color: #141414; /* Negro Netflix */
            color: white;
            font-family: 'Montserrat', sans-serif;
            overflow: hidden; /* Evitar scroll global */
            height: 100vh;
            width: 100vw;
        }

        /* --- UTILIDADES --- */
        .oculto { display: none !important; }
        .flex-center { display: flex; justify-content: center; align-items: center; }
        .full-screen { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }

        /* --- 1. INTRO ANIMATION (TUDUM) --- */
        #splash-screen {
            background: black;
            z-index: 5000;
            flex-direction: column;
            animation: fadeOut 1s ease 3s forwards; /* Desaparece a los 3s */
        }
        .netflix-logo {
            font-family: 'Bebas Neue', cursive;
            font-size: 5rem;
            color: #E50914; /* Rojo Netflix */
            letter-spacing: 5px;
            animation: zoomIn 2s ease;
        }

        /* --- 2. PERFIL DE USUARIO --- */
        #profile-gate {
            background: #141414;
            z-index: 4000;
            flex-direction: column;
            text-align: center;
        }
        .profile-title { font-size: 2rem; margin-bottom: 30px; font-weight: 300; }
        .profile-box {
            cursor: pointer;
            transition: transform 0.2s;
        }
        .profile-box:hover { transform: scale(1.1); }
        .avatar {
            width: 120px;
            height: 120px;
            background: url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT7e1n3n6w4qC8y4i8z2u8e8e8e8e8e8e8e8&s') center/cover; /* Placeholder avatar */
            background-color: #333;
            border-radius: 10px;
            margin: 0 auto 15px;
            border: 3px solid transparent;
        }
        .profile-box:hover .avatar { border-color: white; }
        .profile-name { color: grey; font-size: 1.2rem; }
        .profile-box:hover .profile-name { color: white; }

        /* --- 3. HOME (BROWSE) --- */
        #browse-screen {
            background: #141414;
            z-index: 3000;
            overflow-y: auto; /* Permitir scroll si es necesario */
            padding-bottom: 50px;
        }
        
        /* Navbar */
        .navbar {
            position: fixed; top: 0; width: 100%; 
            padding: 20px 4%; 
            background: linear-gradient(to bottom, rgba(0,0,0,0.7) 10%, rgba(0,0,0,0));
            z-index: 3001;
            display: flex; align-items: center;
        }
        .logo-small { font-family: 'Bebas Neue'; color: #E50914; font-size: 1.8rem; margin-right: 30px; cursor: pointer;}

        /* Hero Section (Fondo Universo) */
        .hero {
            position: relative;
            height: 70vh;
            width: 100%;
            overflow: hidden;
        }
        .hero-bg {
            position: absolute; top:0; left:0; width:100%; height:100%; z-index: 0;
            background: black;
        }
        .hero-content {
            position: absolute;
            bottom: 35%; left: 4%;
            z-index: 10;
            max-width: 600px;
        }
        .hero-title {
            font-family: 'Bebas Neue';
            font-size: 5rem;
            line-height: 1;
            margin-bottom: 15px;
            text-shadow: 2px 2px 10px rgba(0,0,0,0.8);
        }
        .hero-desc {
            font-size: 1.2rem;
            margin-bottom: 20px;
            text-shadow: 1px 1px 5px rgba(0,0,0,0.8);
        }
        .btn-play {
            background: white; color: black;
            padding: 10px 25px; border-radius: 5px;
            font-weight: bold; font-size: 1.1rem;
            border: none; cursor: pointer; display: inline-flex; align-items: center; gap: 10px;
            transition: 0.2s;
        }
        .btn-play:hover { background: #rgba(255,255,255,0.8); transform: scale(1.05); }

        /* Carrusel de Episodios */
        .row-title {
            margin-left: 4%; margin-top: -100px; margin-bottom: 10px;
            font-weight: bold; font-size: 1.2rem; z-index: 20; position: relative;
        }
        .carousel {
            display: flex; gap: 10px; padding: 0 4%;
            overflow-x: auto; scroll-behavior: smooth;
            z-index: 20; position: relative;
            padding-bottom: 40px;
        }
        .carousel::-webkit-scrollbar { display: none; }
        
        .episode-card {
            min-width: 250px; height: 140px;
            background: #333; border-radius: 5px;
            position: relative; cursor: pointer;
            transition: transform 0.3s;
            overflow: hidden;
            border: 2px solid transparent;
        }
        .episode-card:hover { transform: scale(1.05); border-color: white; z-index: 21;}
        .card-img { width: 100%; height: 100%; object-fit: cover; opacity: 0.7; transition: 0.3s; }
        .episode-card:hover .card-img { opacity: 0.3; }
        .card-title {
            position: absolute; bottom: 10px; left: 10px;
            font-weight: bold; font-size: 1rem; text-transform: uppercase;
        }
        .card-icon {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            font-size: 2rem; opacity: 0; transition: 0.3s;
        }
        .episode-card:hover .card-icon { opacity: 1; }

        /* --- 4. VIEWER (REPRODUCTOR) --- */
        #viewer-screen {
            background: black;
            z-index: 4000;
        }
        .close-btn {
            position: absolute; top: 30px; right: 30px;
            font-size: 2rem; color: white; cursor: pointer;
            z-index: 5000; background: rgba(0,0,0,0.5);
            width: 50px; height: 50px; border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            transition: 0.3s; border: 2px solid white;
        }
        .close-btn:hover { background: white; color: black; }

        /* --- ESCENAS INTERNAS (Copiadas y adaptadas) --- */
        #universo-canvas { position: absolute; top:0; left:0; width:100%; height:100%; }
        
        #jardin-container { background: linear-gradient(to bottom, #ff9a9e, #fecfef); flex-direction: column; }
        #carta-container { background: linear-gradient(135deg, #667eea, #764ba2); flex-direction: column; }
        #corazon-container { background: radial-gradient(circle, #1a0b14, #000000); flex-direction: column; }
        #galeria-container { background: #000; overflow: hidden; perspective: 1000px; }

        /* Estilos espec√≠ficos de las escenas */
        .mensaje-arbol { font-family: 'Pacifico'; font-size: 2rem; margin-top: 20px; color: white; text-shadow: 0 2px 5px rgba(0,0,0,0.5); z-index: 10;}
        
        /* Carta */
        .sobre-container { position: relative; width: 300px; height: 200px; cursor: pointer; transition: transform 0.3s; }
        .sobre-container:hover { transform: scale(1.05); }
        .sobre { position: absolute; width: 100%; height: 100%; background: #ff4d6d; border-radius: 10px; z-index: 5; }
        .solapa { position: absolute; top: 0; left: 0; border-left: 150px solid transparent; border-right: 150px solid transparent; border-top: 100px solid #ff758c; transform-origin: top; transition: 0.6s; z-index: 6; }
        .carta-papel { position: absolute; top: 10px; left: 10px; width: 280px; height: 180px; background: white; padding: 20px; font-family: 'Dancing Script'; font-size: 1.2rem; color: #333; text-align: center; transition: 0.6s; z-index: 4; display: flex; align-items: center; justify-content: center; box-sizing: border-box; }
        .abrir-sobre .solapa { transform: rotateX(180deg); z-index: 1; }
        .abrir-sobre .carta-papel { transform: translateY(-120px); z-index: 10; }

        /* Carrusel */
        .carousel-3d { position: relative; width: 200px; height: 300px; transform-style: preserve-3d; animation: rotar 20s infinite linear; }
        .foto-card { position: absolute; width: 100%; height: 100%; background: rgba(255,255,255,0.1); border: 2px solid #ff4d6d; overflow: hidden; }
        .foto-card img { width: 100%; height: 100%; object-fit: cover; }
        @keyframes rotar { from { transform: rotateY(0deg); } to { transform: rotateY(360deg); } }

        /* Animaciones Intro */
        @keyframes zoomIn { 0% { transform: scale(0); opacity: 0; } 50% { transform: scale(1.2); opacity: 1; } 100% { transform: scale(1); } }
        @keyframes fadeOut { to { opacity: 0; visibility: hidden; } }

    </style>
</head>
<body>

    <div id="splash-screen" class="full-screen flex-center">
        <div class="netflix-logo">LOVEFLIX</div>
    </div>

    <div id="profile-gate" class="full-screen flex-center oculto">
        <div class="profile-title">¬øQui√©n est√° viendo ahora?</div>
        <div class="profile-box" onclick="enterApp()">
            <div class="avatar"></div>
            <div class="profile-name">Mi Amor ‚ù§Ô∏è</div>
        </div>
    </div>

    <div id="browse-screen" class="full-screen oculto">
        <div class="navbar">
            <div class="logo-small" onclick="closeViewer()">LOVEFLIX</div>
            <div style="flex-grow:1"></div>
            <div style="font-size: 0.9rem; margin-right: 15px;">Inicio</div>
            <div style="font-size: 0.9rem;">Mi Lista</div>
        </div>

        <div class="hero">
            <div class="hero-bg" id="hero-bg">
                </div>
            <div class="hero-content">
                <div class="hero-title">NUESTRA<br>HISTORIA</div>
                <div class="hero-desc">Una serie original basada en hechos reales. Protagonizada por t√∫ y yo. 98% de coincidencia.</div>
                <button class="btn-play" onclick="openScene('universo')">
                    ‚ñ∂ Reproducir
                </button>
            </div>
        </div>

        <div class="row-title">Ver de nuevo</div>
        <div class="carousel">
            <div class="episode-card" onclick="openScene('jardin')">
                <div style="background: linear-gradient(to bottom, #ff9a9e, #fecfef); width:100%; height:100%;"></div>
                <div class="card-icon">üå≥</div>
                <div class="card-title">Episodio 1: El Jard√≠n</div>
            </div>
            
            <div class="episode-card" onclick="openScene('carta')">
                <div style="background: linear-gradient(135deg, #667eea, #764ba2); width:100%; height:100%;"></div>
                <div class="card-icon">üíå</div>
                <div class="card-title">Episodio 2: La Carta</div>
            </div>

            <div class="episode-card" onclick="openScene('corazon')">
                <div style="background: #1a0b14; width:100%; height:100%;"></div>
                <div class="card-icon">üíñ</div>
                <div class="card-title">Episodio 3: Mi Coraz√≥n</div>
            </div>

            <div class="episode-card" onclick="openScene('galeria')">
                <div style="background: #333; width:100%; height:100%;"></div>
                <div class="card-icon">üì∏</div>
                <div class="card-title">Episodio 4: Recuerdos</div>
            </div>
        </div>
    </div>

    <div id="viewer-screen" class="full-screen oculto">
        <div class="close-btn" onclick="closeViewer()">‚úï</div>
        
        <div id="universo-container" class="full-screen oculto">
            <div id="universo-canvas-placeholder"></div>
            <div class="flex-center full-screen" style="pointer-events: none; z-index: 10; flex-direction: column;">
                <h1 style="font-size: 3rem; text-shadow: 0 0 10px black;">Para ti</h1>
                <div id="maquina-escribir" style="font-size: 1.5rem; margin-top: 20px;"></div>
            </div>
        </div>

        <div id="jardin-container" class="full-screen flex-center oculto">
            <canvas id="arbolCanvas"></canvas>
            <div class="mensaje-arbol">Nuestro Amor Florece</div>
        </div>

        <div id="carta-container" class="full-screen flex-center oculto">
            <div class="sobre-container" id="sobre" onclick="this.classList.toggle('abrir-sobre')">
                <div class="sobre"></div>
                <div class="solapa"></div>
                <div class="carta-papel">
                    "Gracias por ser la mejor parte de mi vida. <br> Te Amo."
                </div>
            </div>
            <div style="margin-top: 50px; opacity: 0.8;">(Toca el sobre)</div>
        </div>

        <div id="corazon-container" class="full-screen flex-center oculto">
            <canvas id="heartCanvas"></canvas>
            <div style="position: absolute; top: 10%; font-family: 'Pacifico'; font-size: 3rem; color: #ff99ac;">Eres mi Todo</div>
        </div>

        <div id="galeria-container" class="full-screen flex-center oculto">
            <div class="carousel-3d" id="galeria-wrapper">
                </div>
        </div>

    </div>

    <canvas id="starCanvas" style="position: fixed; top: 0; left: 0; z-index: -1;"></canvas>

    <audio id="bg-music" loop>
        <source src="tu_cancion.mp3" type="audio/mpeg">
    </audio>

    <script>
        /* --- CONFIGURACI√ìN --- */
        const FOTOS = [
            "https://via.placeholder.com/200x300/ff4d6d/fff?text=Foto+1",
            "https://via.placeholder.com/200x300/ff4d6d/fff?text=Foto+2",
            "https://via.placeholder.com/200x300/ff4d6d/fff?text=Foto+3",
            "https://via.placeholder.com/200x300/ff4d6d/fff?text=Foto+4",
            "https://via.placeholder.com/200x300/ff4d6d/fff?text=Foto+5"
        ];
        const FRASES = ["Eres incre√≠ble.", "Te quiero.", "Siempre juntos."];

        /* --- NAVEGACI√ìN --- */
        setTimeout(() => {
            document.getElementById('splash-screen').classList.add('oculto');
            document.getElementById('profile-gate').classList.remove('oculto');
            document.getElementById('profile-gate').style.display = 'flex';
        }, 3500); // Intro dura 3.5s

        function enterApp() {
            document.getElementById('profile-gate').classList.add('oculto');
            document.getElementById('browse-screen').classList.remove('oculto');
            // Mover canvas al hero
            const canvas = document.getElementById('starCanvas');
            document.getElementById('hero-bg').appendChild(canvas);
            canvas.style.position = 'absolute';
            
            initStars(); animateStars(); // Arrancar estrellas
            
            // Intentar reproducir m√∫sica
            document.getElementById('bg-music').play().catch(e => console.log("Audio requiere click"));
        }

        function openScene(sceneName) {
            const viewer = document.getElementById('viewer-screen');
            viewer.classList.remove('oculto');
            
            // Ocultar todas las escenas internas
            document.querySelectorAll('#viewer-screen > div:not(.close-btn)').forEach(el => el.classList.add('oculto'));

            if (sceneName === 'universo') {
                document.getElementById('universo-container').classList.remove('oculto');
                // Mover canvas al viewer
                const canvas = document.getElementById('starCanvas');
                document.getElementById('universo-container').insertBefore(canvas, document.getElementById('universo-container').firstChild);
                typeWriter();
            }
            else if (sceneName === 'jardin') {
                document.getElementById('jardin-container').classList.remove('oculto');
                document.getElementById('jardin-container').style.display = 'flex';
                initTree();
            }
            else if (sceneName === 'carta') {
                document.getElementById('carta-container').classList.remove('oculto');
                document.getElementById('carta-container').style.display = 'flex';
            }
            else if (sceneName === 'corazon') {
                document.getElementById('corazon-container').classList.remove('oculto');
                document.getElementById('corazon-container').style.display = 'flex';
                initHeart(); animateHeart();
            }
            else if (sceneName === 'galeria') {
                document.getElementById('galeria-container').classList.remove('oculto');
                document.getElementById('galeria-container').style.display = 'flex';
                initGallery();
            }
        }

        function closeViewer() {
            document.getElementById('viewer-screen').classList.add('oculto');
            // Devolver canvas al hero
            const canvas = document.getElementById('starCanvas');
            document.getElementById('hero-bg').appendChild(canvas);
        }

        /* --- 1. ESTRELLAS --- */
        const sCanvas = document.getElementById('starCanvas');
        const sCtx = sCanvas.getContext('2d');
        let stars = [];
        function initStars() {
            sCanvas.width = window.innerWidth; sCanvas.height = window.innerHeight;
            stars = [];
            for(let i=0; i<200; i++) stars.push({x:Math.random()*sCanvas.width, y:Math.random()*sCanvas.height, z:Math.random()*sCanvas.width});
        }
        function animateStars() {
            sCtx.fillStyle = "black"; sCtx.fillRect(0,0,sCanvas.width, sCanvas.height);
            sCtx.fillStyle = "white";
            stars.forEach(s => {
                s.z -= 2; if(s.z<=0) s.z=sCanvas.width;
                let x = (s.x-sCanvas.width/2)*(sCanvas.width/s.z)+sCanvas.width/2;
                let y = (s.y-sCanvas.height/2)*(sCanvas.width/s.z)+sCanvas.height/2;
                if(x>0&&x<sCanvas.width&&y>0&&y<sCanvas.height){ sCtx.beginPath(); sCtx.arc(x,y,(1-s.z/sCanvas.width)*3,0,Math.PI*2); sCtx.fill(); }
            });
            requestAnimationFrame(animateStars);
        }

        /* --- 2. √ÅRBOL --- */
        const tCanvas = document.getElementById('arbolCanvas');
        const tCtx = tCanvas.getContext('2d');
        function initTree() {
            tCanvas.width = window.innerWidth; tCanvas.height = window.innerHeight;
            tCtx.clearRect(0,0,tCanvas.width, tCanvas.height);
            drawBranch(tCanvas.width/2, tCanvas.height, 120, -90, 20, 0);
        }
        function drawBranch(x, y, len, angle, width, depth) {
            setTimeout(() => {
                if(document.getElementById('jardin-container').classList.contains('oculto')) return;
                tCtx.beginPath(); tCtx.moveTo(x, y);
                const ex = x + len * Math.cos(angle*Math.PI/180);
                const ey = y + len * Math.sin(angle*Math.PI/180);
                tCtx.lineTo(ex, ey);
                tCtx.strokeStyle = `hsl(25, ${70-depth*5}%, ${20+depth*2}%)`; tCtx.lineWidth = width; tCtx.lineCap="round"; tCtx.stroke();
                
                if(depth>6) {
                    for(let i=0;i<3;i++){
                        tCtx.fillStyle = `hsl(${340+Math.random()*20}, 100%, 60%)`;
                        tCtx.font=`${10+Math.random()*10}px Arial`; 
                        tCtx.fillText("‚ù§Ô∏è", ex+(Math.random()-0.5)*20, ey+(Math.random()-0.5)*20);
                    }
                }
                if(depth<10) {
                    drawBranch(ex, ey, len*0.75, angle-20-Math.random()*10, width*0.7, depth+1);
                    drawBranch(ex, ey, len*0.75, angle+20+Math.random()*10, width*0.7, depth+1);
                }
            }, 50*depth);
        }

        /* --- 3. CORAZ√ìN --- */
        const hCanvas = document.getElementById('heartCanvas');
        const hCtx = hCanvas.getContext('2d');
        let hPoints = [], angY = 0;
        function initHeart() {
            hCanvas.width = window.innerWidth; hCanvas.height = window.innerHeight;
            hPoints = [];
            for(let i=0; i<1000; i++) {
                let t = Math.random()*Math.PI*2, z = (Math.random()-0.5)*10;
                let x = 16*Math.pow(Math.sin(t),3)*12;
                let y = -(13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t))*12;
                hPoints.push({x, y, z: z*12, color: `hsl(${330+Math.random()*30}, 90%, 60%)`});
            }
        }
        function animateHeart() {
            if(document.getElementById('corazon-container').classList.contains('oculto')) return;
            hCtx.clearRect(0,0,hCanvas.width, hCanvas.height);
            angY += 0.015;
            let cx = hCanvas.width/2, cy = hCanvas.height/2;
            hPoints.forEach(p => {
                let rx = p.x*Math.cos(angY) - p.z*Math.sin(angY);
                let rz = p.x*Math.sin(angY) + p.z*Math.cos(angY);
                let s = 500/(500+rz);
                if(s>0) { hCtx.fillStyle=p.color; hCtx.beginPath(); hCtx.arc(rx*s+cx, p.y*s+cy, 2*s, 0, Math.PI*2); hCtx.fill(); }
            });
            requestAnimationFrame(animateHeart);
        }

        /* --- 4. GALER√çA --- */
        function initGallery() {
            const wrap = document.getElementById('galeria-wrapper');
            if(wrap.children.length > 0) return;
            const step = 360/FOTOS.length;
            FOTOS.forEach((src, i) => {
                const d = document.createElement('div');
                d.className = 'foto-card';
                d.style.transform = `rotateY(${i*step}deg) translateZ(300px)`;
                d.innerHTML = `<img src="${src}">`;
                wrap.appendChild(d);
            });
        }

        /* --- MAQUINA ESCRIBIR --- */
        let tI=0, cI=0, isD=false;
        function typeWriter() {
            if(document.getElementById('universo-container').classList.contains('oculto')) return;
            const txt = FRASES[tI];
            const el = document.getElementById('maquina-escribir');
            el.innerText = isD ? txt.substring(0, cI--) : txt.substring(0, cI++);
            let spd = isD ? 50 : 100;
            if(!isD && cI===txt.length+1){ spd=2000; isD=true; }
            else if(isD && cI===0){ isD=false; tI=(tI+1)%FRASES.length; spd=500; }
            setTimeout(typeWriter, spd);
        }

        window.addEventListener('resize', () => { initStars(); initHeart(); });
    </script>
</body>
</html>
