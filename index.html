<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Para ti ‚ù§Ô∏è</title>
    <style>
        /* --- FUENTES --- */
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;500;700&family=Dancing+Script:wght@700&display=swap');

        /* --- ESTILOS GENERALES --- */
        body {
            margin: 0;
            overflow: hidden;
            background-color: #000; /* Fondo negro puro */
            font-family: 'Montserrat', sans-serif;
            color: white;
            height: 100vh;
            width: 100vw;
        }

        /* --- BOT√ìN FLOTANTE --- */
        #btn-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 1000; /* Siempre encima */
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.5);
            color: white;
            border-radius: 30px;
            cursor: pointer;
            backdrop-filter: blur(5px);
            transition: all 0.3s;
            font-weight: bold;
        }
        #btn-toggle:hover {
            background: #ff4d6d;
            border-color: #ff4d6d;
            box-shadow: 0 0 15px #ff4d6d;
        }

        /* --- CAPAS (ESCENAS) --- */
        .escena {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            pointer-events: none;
            transition: opacity 1s ease;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .activa {
            opacity: 1;
            pointer-events: all;
        }

        /* --- ESCENA 1: ESPACIO --- */
        #universo {
            background: black; /* Asegurar fondo */
        }

        /* IMPORTANTE: El Canvas debe ocupar todo y estar detr√°s del texto */
        #starCanvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1; /* Nivel 1 */
        }

        #contenido-texto {
            position: relative;
            z-index: 10; /* Nivel 10 (encima de estrellas) */
            text-align: center;
            background: rgba(0, 0, 0, 0.3); /* Un poco de oscuridad para leer mejor */
            padding: 40px;
            border-radius: 20px;
        }

        h1 {
            font-family: 'Dancing Script', cursive;
            font-size: 4rem;
            color: #ff4d6d;
            text-shadow: 0 0 20px #ff4d6d;
            margin: 0;
        }

        #maquina-escribir {
            font-size: 1.5rem;
            margin-top: 15px;
            min-height: 1.6em;
            color: #eee;
            text-shadow: 0 2px 4px rgba(0,0,0,0.8);
        }

        /* Cursor parpadeante */
        .cursor {
            display: inline-block;
            width: 2px;
            height: 1.2em;
            background-color: white;
            animation: blink 1s infinite;
            vertical-align: sub;
        }

        /* --- ESCENA 2: JARD√çN --- */
        #jardin {
            background: linear-gradient(to bottom, #fff0f3, #ffffff);
            flex-direction: column;
            z-index: 5; /* Nivel base del jard√≠n */
        }

        canvas#arbolCanvas {
            margin-bottom: 20px;
            z-index: 10; /* √Årbol sobre el fondo */
            position: relative;
        }

        .tarjeta {
            background: white;
            padding: 25px 40px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 10px 40px rgba(255, 77, 109, 0.2);
            color: #5c3a45;
            max-width: 80%;
            border: 2px solid #fff0f3;
            z-index: 20; /* Tarjeta sobre el √°rbol */
            position: relative;
        }

        .contador {
            font-weight: 700;
            color: #ff4d6d;
            font-size: 1.2rem;
            margin-top: 10px;
        }

        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }

    </style>
</head>
<body>

    <button id="btn-toggle" onclick="alternarEscena()">Ver Jard√≠n üå±</button>

    <div id="universo" class="escena activa">
        <canvas id="starCanvas"></canvas>
        
        <div id="contenido-texto">
            <h1>Para mi Amor</h1>
            <div>
                <span id="maquina-escribir"></span><span class="cursor"></span>
            </div>
        </div>
    </div>

    <div id="jardin" class="escena">
        <canvas id="arbolCanvas"></canvas>
        <div class="tarjeta">
            <p style="font-style: italic; font-size: 1.1rem;">
                "Te quiero no solo por c√≥mo eres,<br>sino por c√≥mo soy yo cuando estoy contigo."
            </p>
            <div style="font-size: 0.8rem; text-transform: uppercase; margin-top: 15px; letter-spacing: 1px;">
                Juntos desde el 25/10/2025
            </div>
            <div id="reloj" class="contador">Calculando...</div>
        </div>
    </div>

    <script>
        /* =========================================
           CONFIGURACI√ìN (¬°Edita esto si quieres!)
           ========================================= */
        const FECHA_INICIO = new Date("2025-10-25T00:00:00");
        const FRASES = [
            "Eres mi universo entero.",
            "Me pierdo en tu mirada.",
            "Viajando hacia ti...",
            "Te quiero hasta el infinito."
        ];

        /* =========================================
           1. SISTEMA DE ESTRELLAS (WARP SPEED)
           ========================================= */
        const canvas = document.getElementById('starCanvas');
        const ctx = canvas.getContext('2d');
        
        let width, height, stars;
        const numStars = 400; // Cantidad de estrellas (ajusta si va lento)
        
        // Inicializar tama√±o y estrellas
        function initStars() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
            stars = [];
            for (let i = 0; i < numStars; i++) {
                stars.push({
                    x: Math.random() * width - width / 2,
                    y: Math.random() * height - height / 2,
                    z: Math.random() * width // Profundidad
                });
            }
        }

        // Bucle de animaci√≥n (Optimizado)
        function animateStars() {
            if (!document.getElementById('universo').classList.contains('activa')) return;

            // Fondo negro con rastro muy leve (trail effect)
            ctx.fillStyle = "rgba(0, 0, 0, 0.4)"; 
            ctx.fillRect(0, 0, width, height);
            
            ctx.fillStyle = "#ffffff"; // Estrellas blancas
            
            stars.forEach(star => {
                // Mover estrella hacia la c√°mara
                star.z -= 10; // Velocidad

                // Si la estrella pasa la pantalla, reiniciarla al fondo
                if (star.z <= 0) {
                    star.z = width;
                    star.x = Math.random() * width - width / 2;
                    star.y = Math.random() * height - height / 2;
                }

                // Matem√°ticas de proyecci√≥n 3D a 2D
                const x = (star.x / star.z) * width + width / 2;
                const y = (star.y / star.z) * height + height / 2;
                
                // Tama√±o basado en cercan√≠a
                const size = (1 - star.z / width) * 4;

                // Dibujar solo si est√° en pantalla
                if (x > 0 && x < width && y > 0 && y < height) {
                    ctx.beginPath();
                    ctx.arc(x, y, size, 0, Math.PI * 2);
                    ctx.fill();
                }
            });

            requestAnimationFrame(animateStars);
        }

        /* =========================================
           2. M√ÅQUINA DE ESCRIBIR
           ========================================= */
        let fraseIdx = 0;
        let charIdx = 0;
        let isDeleting = false;
        const element = document.getElementById('maquina-escribir');

        function typeWriter() {
            const current = FRASES[fraseIdx];
            
            if (isDeleting) {
                element.innerText = current.substring(0, charIdx - 1);
                charIdx--;
            } else {
                element.innerText = current.substring(0, charIdx + 1);
                charIdx++;
            }

            let speed = isDeleting ? 50 : 100;

            if (!isDeleting && charIdx === current.length) {
                speed = 2000; // Pausa al terminar frase
                isDeleting = true;
            } else if (isDeleting && charIdx === 0) {
                isDeleting = false;
                fraseIdx = (fraseIdx + 1) % FRASES.length;
                speed = 500;
            }

            setTimeout(typeWriter, speed);
        }

        /* =========================================
           3. JARD√çN Y √ÅRBOL (Estilo Bons√°i)
           ========================================= */
        const treeCanvas = document.getElementById('arbolCanvas');
        const tCtx = treeCanvas.getContext('2d');
        let growth = 0;

        function resizeTree() {
            treeCanvas.width = 350;
            treeCanvas.height = 400;
        }

        function drawTree() {
            if (!document.getElementById('jardin').classList.contains('activa')) return;
            
            tCtx.clearRect(0, 0, treeCanvas.width, treeCanvas.height);
            if (growth < 1) growth += 0.01;

            // Iniciar dibujo del bons√°i desde el centro inferior
            drawBranch(treeCanvas.width/2, treeCanvas.height, 80 * growth, 0, 12);
            requestAnimationFrame(drawTree);
        }

        function drawBranch(x, y, len, angle, width) {
            tCtx.save();
            tCtx.translate(x, y);
            tCtx.rotate(angle * Math.PI / 180);
            tCtx.beginPath();
            tCtx.moveTo(0, 0);
            tCtx.lineTo(0, -len);
            // Color verde oscuro para el tronco tipo bons√°i
            tCtx.strokeStyle = "#556b2f"; 
            tCtx.lineWidth = width;
            tCtx.lineCap = "round"; // Bordes redondeados
            tCtx.stroke();

            // Dibujar hojas/corazones al final de las ramas m√°s peque√±as
            if (len < 20 && len > 0) {
                tCtx.fillStyle = "#ff006e";
                tCtx.font = "18px Arial";
                tCtx.fillText("‚ù§Ô∏è", -9, -len);
            }

            // Recursividad para crear ramas, con √°ngulos m√°s pronunciados para bons√°i
            if (len > 10) {
                tCtx.translate(0, -len);
                // Ramas m√°s cortas y con m√°s √°ngulo para efecto retorcido
                drawBranch(0, 0, len * 0.7, 35 + Math.random()*10, width * 0.7);
                drawBranch(0, 0, len * 0.7, -35 - Math.random()*10, width * 0.7);
            }
            tCtx.restore();
        }

        /* =========================================
           4. L√ìGICA GENERAL
           ========================================= */
        function alternarEscena() {
            const u = document.getElementById('universo');
            const j = document.getElementById('jardin');
            const btn = document.getElementById('btn-toggle');

            if (u.classList.contains('activa')) {
                // IR A JARD√çN
                u.classList.remove('activa');
                u.style.opacity = 0; // Forzar ocultado visual
                
                j.style.display = 'flex';
                setTimeout(() => j.classList.add('activa'), 50);
                
                btn.innerText = "Volver al Universo ‚ú®";
                growth = 0; 
                resizeTree();
                drawTree();
            } else {
                // IR A UNIVERSO
                j.classList.remove('activa');
                setTimeout(() => j.style.display = 'none', 1000);
                
                u.classList.add('activa');
                u.style.opacity = 1;
                
                btn.innerText = "Ver Jard√≠n üå±";
                initStars();
                animateStars();
            }
        }

        function updateClock() {
            const diff = new Date() - FECHA_INICIO;
            const d = Math.floor(diff / (1000 * 60 * 60 * 24));
            const h = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const m = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const s = Math.floor((diff % (1000 * 60)) / 1000);
            document.getElementById('reloj').innerText = `${d}d ${h}h ${m}m ${s}s`;
        }

        // ARRANQUE
        window.addEventListener('resize', initStars);
        window.onload = () => {
            initStars();
            animateStars();
            typeWriter();
            setInterval(updateClock, 1000);
        };

    </script>
</body>
</html>
</html>

