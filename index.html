<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Para ti ‚ù§Ô∏è</title>
    <style>
        /* --- FUENTES --- */
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;500;700&family=Dancing+Script:wght@700&family=Pacifico&display=swap');

        /* --- ESTILOS BASE DEL PROYECTO --- */
        body {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            overflow: hidden;
            background-color: #000;
            font-family: 'Montserrat', sans-serif;
            color: white;
            height: 100vh;
            width: 100vw;
            perspective: 1000px;
        }

        .controls {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 10000;
            display: flex;
            gap: 10px;
        }

        .btn-glass {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            border-radius: 30px;
            cursor: pointer;
            backdrop-filter: blur(5px);
            transition: 0.3s;
            font-weight: bold;
        }

        .btn-glass:hover {
            background: #ff4d6d;
            border-color: #ff4d6d;
        }

        .escena {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            opacity: 0;
            pointer-events: none;
            transition: opacity 1s ease;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .activa { opacity: 1; pointer-events: all; }

        /* --- ESTILOS DE TUS FLORES (ADAPTADOS) --- */
        :root { --dark-color: #000; }

        .night {
            position: absolute;
            width: 100%; height: 100%;
            background-image: radial-gradient(ellipse at top, transparent 0%, var(--dark-color)),
            radial-gradient(ellipse at bottom, var(--dark-color), rgba(145, 233, 255, 0.2)),
            linear-gradient(90deg, rgb(0, 255, 250), rgb(240, 240, 240));
            z-index: 0;
        }

        .flowers {
            position: relative;
            transform: scale(0.6) translateY(20vmin);
            display: flex;
            justify-content: center;
            align-items: flex-end;
            z-index: 10;
        }

        .flower {
            position: absolute;
            bottom: 10vmin;
            transform-origin: bottom center;
            z-index: 10;
            --fl-speed: 0.8s;
        }

        .flower--1 { animation: moving-flower-1 4s linear infinite; }
        .flower--2 { left: 50%; transform: rotate(20deg); animation: moving-flower-2 4s linear infinite; }
        .flower--3 { left: 50%; transform: rotate(-15deg); animation: moving-flower-3 4s linear infinite; }

        .flower__line {
            height: 55vmin;
            width: 1.5vmin;
            background-image: linear-gradient(to left, rgba(0,0,0,0.2), transparent, rgba(255,255,255,0.2)),
                              linear-gradient(to top, transparent 10%, #14757a, #39c6d6);
            box-shadow: inset 0 0 2px rgba(0,0,0,0.5);
            animation: grow-flower-tree 4s backwards;
        }

        .flower--1 .flower__line { height: 70vmin; animation-delay: 0.3s; }
        .flower--2 .flower__line { height: 60vmin; animation-delay: 0.6s; }
        .flower--3 .flower__line { animation-delay: 0.9s; }

        .flower__leafs {
            position: relative;
            animation: blooming-flower 2s backwards;
        }

        .flower__leafs--1 { animation-delay: 1.1s; }
        .flower__leafs--2 { animation-delay: 1.4s; }
        .flower__leafs--3 { animation-delay: 1.7s; }

        .flower__leafs::after {
            content: "";
            position: absolute;
            left: 0; top: 0;
            transform: translate(-50%, -100%);
            width: 8vmin; height: 8vmin;
            background-color: #6bf0ff;
            filter: blur(10vmin);
        }

        .flower__leaf {
            position: absolute;
            bottom: 0; left: 50%;
            width: 8vmin; height: 11vmin;
            border-radius: 51% 49% 47% 53% / 44% 45% 55% 69%;
            background-color: #a7ffee;
            background-image: linear-gradient(to top, #54b8aa, #a7ffee);
            transform-origin: bottom center;
            opacity: 0.9;
            box-shadow: inset 0 0 2vmin rgba(255, 255, 255, 0.5);
        }

        .flower__leaf--1 { transform: translate(-10%, 1%) rotateY(40deg) rotateX(-50deg); }
        .flower__leaf--2 { transform: translate(-50%, -4%) rotateX(40deg); }
        .flower__leaf--3 { transform: translate(-90%, 0%) rotateY(45deg) rotateX(50deg); }
        .flower__leaf--4 {
            width: 8vmin; height: 8vmin; transform-origin: bottom left;
            border-radius: 4vmin 10vmin 4vmin 4vmin;
            transform: translate(-0%, 18%) rotateX(70deg) rotate(-43deg);
            background-image: linear-gradient(to top, #39c6d6, #a7ffee);
            z-index: 1; opacity: 0.8;
        }

        .flower__white-circle {
            position: absolute; left: -3.5vmin; top: -3vmin;
            width: 9vmin; height: 4vmin;
            border-radius: 50%; background-color: #fff;
        }

        .flower__line__leaf {
            position: absolute; width: 7vmin; height: 9vmin;
            background-image: linear-gradient(to top, rgba(20, 117, 122, 0.4), #39c6d6);
            border-top-right-radius: 7vmin; border-bottom-left-radius: 7vmin;
        }

        .flower__line__leaf--1 { top: 20%; left: 90%; transform: rotate(70deg) rotateY(30deg); animation: blooming-leaf-right var(--fl-speed) 1.6s backwards; }
        .flower__line__leaf--2 { top: 45%; left: 90%; transform: rotate(70deg) rotateY(30deg); animation: blooming-leaf-right var(--fl-speed) 1.4s backwards; }
        .flower__line__leaf--3 { top: 12%; left: -460%; transform: rotate(-70deg) rotateY(30deg); border-radius: 7vmin 0 7vmin 0; animation: blooming-leaf-left var(--fl-speed) 1.2s backwards; }

        .flower__light {
            position: absolute; bottom: 0vmin; width: 1vmin; height: 1vmin;
            background-color: rgb(255, 251, 0); border-radius: 50%;
            filter: blur(0.2vmin); animation: light-ans 4s linear infinite backwards;
        }

        /* --- POEMA SOBRE LAS FLORES --- */
        .mensaje-poema {
            position: absolute;
            top: 15%;
            z-index: 100;
            text-align: center;
            width: 100%;
            font-family: 'Dancing Script', cursive;
            font-size: 2.2rem;
            color: #fff;
            text-shadow: 0 0 10px rgba(0, 255, 250, 0.8);
            animation: aparecer 3s ease-in forwards;
        }

        /* --- ANIMACIONES --- */
        @keyframes moving-flower-1 { 0%, 100% { transform: rotate(2deg); } 50% { transform: rotate(-2deg); } }
        @keyframes moving-flower-2 { 0%, 100% { transform: rotate(18deg); } 50% { transform: rotate(14deg); } }
        @keyframes moving-flower-3 { 0%, 100% { transform: rotate(-18deg); } 50% { transform: rotate(-20deg) rotateY(-10deg); } }
        @keyframes blooming-flower { 0% { transform: scale(0); } }
        @keyframes grow-flower-tree { 0% { height: 0; } }
        @keyframes blooming-leaf-right { 0% { transform: rotate(70deg) rotateY(30deg) scale(0); } }
        @keyframes blooming-leaf-left { 0% { transform: rotate(-70deg) rotateY(30deg) scale(0); } }
        @keyframes light-ans {
            0% { opacity: 0; transform: translateY(0vmin); }
            25% { opacity: 1; transform: translateY(-5vmin) translateX(-2vmin); }
            50% { opacity: 1; transform: translateY(-15vmin) translateX(2vmin); filter: blur(0.2vmin); }
            100% { transform: translateY(-30vmin); opacity: 0; filter: blur(1vmin); }
        }
        @keyframes aparecer { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }

    </style>
</head>
<body class="not-loaded">

    <div class="controls">
        <button id="btn-music" class="btn-glass" onclick="toggleMusic()">üéµ M√∫sica</button>
        <button id="btn-next" class="btn-glass" onclick="siguienteEscena()">Siguiente ‚ú®</button>
    </div>

    <audio id="bg-music" loop>
        <source src="tu_cancion.mp3" type="audio/mpeg">
    </audio>

    <div id="universo" class="escena activa">
        <canvas id="starCanvas"></canvas>
        <div style="text-align:center; z-index:10; background:rgba(0,0,0,0.5); padding:40px; border-radius:20px;">
            <h1 style="font-family:'Dancing Script'; font-size:4rem; color:#ff4d6d;">Para mi Amor</h1>
            <div id="maquina-escribir" style="font-size:1.5rem; color:#eee; min-height:1.5em;"></div>
        </div>
    </div>

    <div id="jardin" class="escena">
        <div class="night"></div>
        
        <div class="mensaje-poema">
            Bajo este cielo de luces infinitas,<br>
            mi coraz√≥n florece solo para ti.
        </div>

        <div class="flowers">
            <div class="flower flower--1">
                <div class="flower__leafs flower__leafs--1">
                    <div class="flower__leaf flower__leaf--1"></div>
                    <div class="flower__leaf flower__leaf--2"></div>
                    <div class="flower__leaf flower__leaf--3"></div>
                    <div class="flower__leaf flower__leaf--4"></div>
                    <div class="flower__white-circle"></div>
                </div>
                <div class="flower__line">
                    <div class="flower__line__leaf flower__line__leaf--1"></div>
                    <div class="flower__line__leaf flower__line__leaf--2"></div>
                </div>
                <div class="flower__light flower__light--1"></div>
                <div class="flower__light flower__light--2"></div>
            </div>

            <div class="flower flower--2">
                <div class="flower__leafs flower__leafs--2">
                    <div class="flower__leaf flower__leaf--1"></div>
                    <div class="flower__leaf flower__leaf--2"></div>
                    <div class="flower__leaf flower__leaf--3"></div>
                    <div class="flower__leaf flower__leaf--4"></div>
                    <div class="flower__white-circle"></div>
                </div>
                <div class="flower__line">
                    <div class="flower__line__leaf flower__line__leaf--1"></div>
                </div>
            </div>

            <div class="flower flower--3">
                <div class="flower__leafs flower__leafs--3">
                    <div class="flower__leaf flower__leaf--1"></div>
                    <div class="flower__leaf flower__leaf--2"></div>
                    <div class="flower__leaf flower__leaf--3"></div>
                    <div class="flower__leaf flower__leaf--4"></div>
                    <div class="flower__white-circle"></div>
                </div>
                <div class="flower__line">
                    <div class="flower__line__leaf flower__line__leaf--3"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="corazon-scene" class="escena" style="background:radial-gradient(circle, #1a0b14 0%, #000 100%);">
        <canvas id="heartCanvas"></canvas>
        <div style="position:absolute; top:15%; font-family:'Pacifico'; font-size:3rem; color:#ff99ac; text-shadow:0 0 20px #ff006e;">Eres mi Todo</div>
    </div>

    <script>
        const FRASES = ["Eres mi universo.", "Mi casualidad favorita.", "Te amo infinito."];
        let escenaActual = 0;
        const escenasIds = ['universo', 'jardin', 'corazon-scene'];

        function siguienteEscena() {
            document.getElementById(escenasIds[escenaActual]).classList.remove('activa');
            escenaActual = (escenaActual + 1) % escenasIds.length;
            document.getElementById(escenasIds[escenaActual]).classList.add('activa');
            
            if(escenaActual === 0) { initStars(); animateStars(); }
            if(escenaActual === 2) { initHeart(); animateHeart(); }
        }

        function toggleMusic() {
            const audio = document.getElementById('bg-music');
            audio.paused ? audio.play() : audio.pause();
        }

        // --- UNIVERSO STARS ---
        const starCanvas = document.getElementById('starCanvas');
        const sCtx = starCanvas.getContext('2d');
        let stars = [];
        function initStars() {
            starCanvas.width = window.innerWidth; starCanvas.height = window.innerHeight;
            stars = [];
            for(let i=0; i<300; i++) stars.push({x:Math.random()*starCanvas.width, y:Math.random()*starCanvas.height, z:Math.random()*starCanvas.width});
        }
        function animateStars() {
            if(!document.getElementById('universo').classList.contains('activa')) return;
            sCtx.fillStyle = "black"; sCtx.fillRect(0,0,starCanvas.width, starCanvas.height);
            sCtx.fillStyle = "white";
            stars.forEach(s => {
                s.z -= 2; if(s.z <= 0) s.z = starCanvas.width;
                let x = (s.x-starCanvas.width/2)*(starCanvas.width/s.z)+starCanvas.width/2;
                let y = (s.y-starCanvas.height/2)*(starCanvas.width/s.z)+starCanvas.height/2;
                if(x>0 && x<starCanvas.width && y>0 && y<starCanvas.height) { sCtx.beginPath(); sCtx.arc(x,y,(1-s.z/starCanvas.width)*3,0,Math.PI*2); sCtx.fill(); }
            });
            requestAnimationFrame(animateStars);
        }

        // --- CORAZ√ìN ---
        const hCanvas = document.getElementById('heartCanvas');
        const hCtx = hCanvas.getContext('2d');
        let hPoints = []; let angY = 0;
        function initHeart() {
            hCanvas.width = window.innerWidth; hCanvas.height = window.innerHeight;
            hPoints = [];
            for(let i=0; i<1500; i++) {
                let t = Math.random()*Math.PI*2, x = 16*Math.pow(Math.sin(t),3), y = -(13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t));
                let z = (Math.random()-0.5)*10;
                hPoints.push({x:x*12, y:y*12, z:z*12, color: `hsl(${330+Math.random()*40}, 90%, 60%)`});
            }
        }
        function animateHeart() {
            if(!document.getElementById('corazon-scene').classList.contains('activa')) return;
            hCtx.fillStyle = "rgba(0,0,0,0.2)"; hCtx.fillRect(0,0,hCanvas.width, hCanvas.height);
            angY += 0.01;
            let cx = hCanvas.width/2, cy = hCanvas.height/2;
            hPoints.forEach(p => {
                let rx = p.x*Math.cos(angY) - p.z*Math.sin(angY);
                let rz = p.x*Math.sin(angY) + p.z*Math.cos(angY);
                let scale = 500/(500+rz);
                if(scale>0) {
                    hCtx.fillStyle = p.color; hCtx.beginPath(); hCtx.arc(rx*scale+cx, p.y*scale+cy, 2*scale, 0, Math.PI*2); hCtx.fill();
                }
            });
            requestAnimationFrame(animateHeart);
        }

        // --- MAQUINA ESCRIBIR ---
        let tIdx=0, cIdx=0, isDel=false;
        function typeWriter() {
            const txt = FRASES[tIdx];
            const el = document.getElementById('maquina-escribir');
            el.innerText = isDel ? txt.substring(0, cIdx--) : txt.substring(0, cIdx++);
            let spd = isDel ? 50 : 100;
            if(!isDel && cIdx === txt.length+1) { spd = 2000; isDel = true; }
            else if(isDel && cIdx === 0) { isDel = false; tIdx = (tIdx+1)%FRASES.length; spd = 500; }
            setTimeout(typeWriter, spd);
        }

        window.onload = () => {
            document.body.classList.remove('not-loaded');
            initStars(); animateStars(); typeWriter();
        };
    </script>
</body>
</html>
