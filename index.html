<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Para ti ‚ù§Ô∏è</title>
    <style>
        /* --- FUENTES --- */
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;500;700&family=Dancing+Script:wght@700&family=Pacifico&display=swap');

        /* --- RESET Y BASE --- */
        *, *::after, *::before { padding: 0; margin: 0; box-sizing: border-box; }
        :root { --dark-color: #000; --accent: #ff4d6d; --glass: rgba(255, 255, 255, 0.1); }

        body {
            display: flex; align-items: flex-end; justify-content: center;
            min-height: 100vh; background-color: var(--dark-color);
            overflow: hidden; perspective: 1000px;
            font-family: 'Montserrat', sans-serif; color: white;
            -webkit-user-select: none; user-select: none;
        }

        /* --- PANTALLA DE BLOQUEO (LOGIN) --- */
        #login-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #050505; z-index: 40000; /* Capa m√°s alta */
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            transition: opacity 0.8s ease, visibility 0.8s;
        }
        
        .login-card {
            text-align: center; width: 90%; max-width: 350px;
            padding: 30px; background: rgba(20,20,20,0.8);
            border: 1px solid rgba(255,255,255,0.1); border-radius: 20px;
            box-shadow: 0 0 40px rgba(255, 77, 109, 0.1);
        }

        .date-inputs {
            display: flex; justify-content: center; gap: 10px; margin: 20px 0;
        }

        select {
            background: #222; color: white; border: 1px solid #444;
            padding: 10px; border-radius: 10px; font-size: 1rem;
            text-align: center; outline: none; appearance: none; /* Estilo nativo m√≥vil */
        }

        .unlock-btn {
            background: var(--accent); color: white; border: none;
            padding: 12px 30px; border-radius: 30px; font-weight: bold;
            font-size: 1rem; cursor: pointer; margin-top: 15px;
            box-shadow: 0 0 15px var(--accent); transition: 0.3s;
        }
        .unlock-btn:active { transform: scale(0.95); }

        .error-msg { color: #ff4d4d; margin-top: 10px; font-size: 0.9rem; opacity: 0; transition: 0.3s; }
        
        @keyframes shake {
            0% { transform: translateX(0); } 25% { transform: translateX(-10px); }
            50% { transform: translateX(10px); } 75% { transform: translateX(-10px); } 100% { transform: translateX(0); }
        }

        /* --- POP-UP M√öSICA (RESPONSIVE) --- */
        #music-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.95); z-index: 30000;
            display: none; flex-direction: column; justify-content: center; align-items: center;
            opacity: 0; transition: opacity 0.8s ease;
        }
        
        .music-card {
            background: #121212; padding: 30px; border-radius: 20px;
            box-shadow: 0 0 50px rgba(255, 77, 109, 0.2);
            text-align: center; max-width: 400px; width: 85%;
            border: 1px solid #333;
        }

        .song-list { display: flex; flex-direction: column; gap: 10px; max-height: 50vh; overflow-y: auto; }

        .song-btn {
            background: #282828; color: white; border: none;
            padding: 12px; border-radius: 10px; cursor: pointer;
            display: flex; align-items: center; gap: 15px;
            transition: 0.2s; text-align: left;
        }
        .song-btn:active { background: #444; }

        /* --- CONTROLES M√ìVILES --- */
        .controls { position: absolute; top: 20px; right: 20px; z-index: 10000; display: flex; gap: 8px; opacity: 0; transition: 1s; }
        .btn-glass { padding: 8px 16px; background: rgba(255, 255, 255, 0.15); border: 1px solid rgba(255, 255, 255, 0.2); color: white; border-radius: 30px; cursor: pointer; backdrop-filter: blur(5px); transition: 0.3s; font-weight: bold; font-size: 0.85rem; }
        
        /* --- SPOTIFY PLAYER (Bottom) --- */
        .spotify-player {
            position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
            width: 95%; max-width: 400px; height: 70px;
            background: rgba(20, 20, 20, 0.9); backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 12px;
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 15px; z-index: 20000;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            transition: opacity 1s; opacity: 0; pointer-events: none;
        }
        .spotify-player.visible { opacity: 1; pointer-events: all; }
        
        .track-info { display: flex; flex-direction: column; justify-content: center; flex-grow: 1; overflow: hidden; margin-right: 10px; }
        .track-title { font-weight: bold; font-size: 0.9rem; color: white; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .track-artist { font-size: 0.75rem; color: #b3b3b3; }
        
        .player-controls { display: flex; align-items: center; gap: 15px; }
        .control-btn { background: none; border: none; color: white; font-size: 1.2rem; cursor: pointer; }
        .play-btn { width: 35px; height: 35px; background: white; color: black; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1rem; }
        .progress-bar { position: absolute; bottom: 0; left: 0; height: 3px; background: var(--accent); width: 0%; border-radius: 0 0 0 12px; transition: width 0.1s linear; }

        /* --- ESCENAS --- */
        .escena { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; pointer-events: none; transition: opacity 1s ease; display: flex; justify-content: center; align-items: center; flex-direction: column; }
        .activa { opacity: 1; pointer-events: all; }

        /* --- ESCENA 1: UNIVERSO --- */
        #universo { background: black; }
        #starCanvas { position: absolute; z-index: 1; top:0; left:0; width:100%; height:100%; }
        #contenido-texto { position: relative; z-index: 10; text-align: center; background: rgba(0, 0, 0, 0.4); padding: 30px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.1); width: 90%; max-width: 600px; }
        h1 { font-family: 'Dancing Script', cursive; font-size: 3.5rem; color: #ff4d6d; text-shadow: 0 0 20px #ff4d6d; margin: 0; line-height: 1.1; }

        /* --- ESCENA 2: JARD√çN --- */
        #jardin { width: 100%; height: 100%; }
        .night { position: fixed; left: 50%; top: 0; transform: translateX(-50%); width: 100%; height: 100%; filter: blur(0.1vmin); background-image: radial-gradient(ellipse at top, transparent 0%, var(--dark-color)), radial-gradient(ellipse at bottom, var(--dark-color), rgba(145, 233, 255, 0.2)), repeating-linear-gradient(220deg, rgb(0,0,0) 0px, rgb(0,0,0) 19px, transparent 19px, transparent 22px), repeating-linear-gradient(189deg, rgb(0,0,0) 0px, rgb(0,0,0) 19px, transparent 19px, transparent 22px), repeating-linear-gradient(148deg, rgb(0,0,0) 0px, rgb(0,0,0) 19px, transparent 19px, transparent 22px), linear-gradient(90deg, rgb(0, 255, 250), rgb(240, 240, 240)); z-index: 0; }
        .flowers-container { position: absolute; bottom: -5vmin; left: 0; width: 100%; height: 100%; z-index: 10; pointer-events: none; }
        .flower-wrapper { position: absolute; bottom: 0; transform-origin: bottom center; }

        /* TEXTOS */
        .mensaje-poema { position: absolute; top: 15%; z-index: 100; text-align: center; width: 90%; font-family: 'Dancing Script', cursive; font-size: 1.8rem; color: #fff; text-shadow: 0 0 10px rgba(0, 255, 250, 0.8); animation: aparecer 3s ease-in forwards; }
        .contador-dias { position: absolute; top: 28%; width: 100%; text-align: center; font-family: 'Montserrat', sans-serif; font-size: 1rem; font-weight: bold; color: #ff99ac; text-shadow: 0 2px 5px rgba(0,0,0,0.8); z-index: 100; letter-spacing: 1px; padding: 0 10px; }

        /* --- ESCENA 3 & 4 --- */
        #corazon-scene { background: radial-gradient(circle, #1a0b14 0%, #000 100%); }
        #heartCanvas { position: absolute; z-index: 1; }
        .titulo-flotante { position: absolute; top: 15%; font-family: 'Pacifico'; font-size: 2.5rem; color: #ff99ac; text-shadow: 0 0 20px #ff006e; z-index: 10; animation: flotar 3s infinite; text-align: center; width: 100%; }
        #galeria { background: #000; overflow: hidden; }
        .carousel-container { position: relative; width: 140px; height: 200px; transform-style: preserve-3d; animation: rotarCarrusel 20s infinite linear; margin-top: 40px; }
        .foto-card { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255,255,255,0.1); border: 2px solid #ff4d6d; border-radius: 10px; overflow: hidden; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 15px rgba(255,77,109,0.5); }
        .foto-card img { width: 100%; height: 100%; object-fit: cover; }

        /* --- CSS FLORES (MINIMIZADO) --- */
        .flower { position: absolute; bottom: 10vmin; transform-origin: bottom center; z-index: 10; --fl-speed: 0.8s; }
        .flower--1 { animation: moving-flower-1 4s linear infinite; } .flower--2 { left: 50%; transform: rotate(20deg); animation: moving-flower-2 4s linear infinite; } .flower--3 { left: 50%; transform: rotate(-15deg); animation: moving-flower-3 4s linear infinite; }
        .flower__line { height: 55vmin; width: 1.5vmin; background-image: linear-gradient(to left, rgba(0,0,0,0.2), transparent, rgba(255,255,255,0.2)), linear-gradient(to top, transparent 10%, #14757a, #39c6d6); box-shadow: inset 0 0 2px rgba(0,0,0,0.5); animation: grow-flower-tree 4s backwards; }
        .flower--1 .flower__line { height: 70vmin; animation-delay: 0.3s; } .flower--2 .flower__line { height: 60vmin; animation-delay: 0.6s; } .flower--3 .flower__line { animation-delay: 0.9s; }
        .flower__leafs { position: relative; animation: blooming-flower 2s backwards; } .flower__leafs--1 { animation-delay: 1.1s; } .flower__leafs--2 { animation-delay: 1.4s; } .flower__leafs--3 { animation-delay: 1.7s; }
        .flower__leafs::after { content: ""; position: absolute; left: 0; top: 0; transform: translate(-50%, -100%); width: 8vmin; height: 8vmin; background-color: #6bf0ff; filter: blur(10vmin); }
        .flower__leaf { position: absolute; bottom: 0; left: 50%; width: 8vmin; height: 11vmin; border-radius: 51% 49% 47% 53% / 44% 45% 55% 69%; background-color: #a7ffee; background-image: linear-gradient(to top, #54b8aa, #a7ffee); transform-origin: bottom center; opacity: 0.9; box-shadow: inset 0 0 2vmin rgba(255, 255, 255, 0.5); }
        .flower__leaf--1 { transform: translate(-10%, 1%) rotateY(40deg) rotateX(-50deg); } .flower__leaf--2 { transform: translate(-50%, -4%) rotateX(40deg); } .flower__leaf--3 { transform: translate(-90%, 0%) rotateY(45deg) rotateX(50deg); } .flower__leaf--4 { width: 8vmin; height: 8vmin; transform-origin: bottom left; border-radius: 4vmin 10vmin 4vmin 4vmin; transform: translate(-0%, 18%) rotateX(70deg) rotate(-43deg); background-image: linear-gradient(to top, #39c6d6, #a7ffee); z-index: 1; opacity: 0.8; }
        .flower__white-circle { position: absolute; left: -3.5vmin; top: -3vmin; width: 9vmin; height: 4vmin; border-radius: 50%; background-color: #fff; }
        .flower__white-circle::after { content: ""; position: absolute; left: 50%; top: 45%; transform: translate(-50%, -50%); width: 60%; height: 60%; border-radius: inherit; background-image: repeating-linear-gradient(135deg, rgba(0,0,0,0.03) 0px, rgba(0,0,0,0.03) 1px, transparent 1px, transparent 12px), linear-gradient(90deg, rgb(255, 235, 18), rgb(255, 206, 0)); }
        .flower__line__leaf { position: absolute; top: 20%; left: 90%; width: 7vmin; height: 9vmin; border-top-right-radius: 7vmin; border-bottom-left-radius: 7vmin; background-image: linear-gradient(to top, rgba(20, 117, 122, 0.4), #39c6d6); }
        .flower__line__leaf--1 { transform: rotate(70deg) rotateY(30deg); animation: blooming-leaf-right var(--fl-speed) 1.6s backwards; } .flower__line__leaf--2 { top: 45%; transform: rotate(70deg) rotateY(30deg); animation: blooming-leaf-right var(--fl-speed) 1.4s backwards; } .flower__line__leaf--3 { border-top-right-radius: 0; border-bottom-left-radius: 0; border-top-left-radius: 7vmin; border-bottom-right-radius: 7vmin; left: -460%; top: 12%; transform: rotate(-70deg) rotateY(30deg); animation: blooming-leaf-left var(--fl-speed) 1.2s backwards; } .flower__line__leaf--4 { top: 40%; left: -460%; transform: rotate(-70deg) rotateY(30deg); animation: blooming-leaf-left var(--fl-speed) 1.2s backwards; }
        .flower__light { position: absolute; bottom: 0vmin; width: 1vmin; height: 1vmin; background-color: rgb(255, 251, 0); border-radius: 50%; filter: blur(0.2vmin); animation: light-ans 4s linear infinite backwards; }
        .flower__light:nth-child(odd) { background-color: #23f0ff; }
        .flower__light--1 { left: -2vmin; animation-delay: 1s; } .flower__light--2 { left: 3vmin; animation-delay: 0.5s; } .flower__light--3 { left: -6vmin; animation-delay: 0.3s; } .flower__light--4 { left: 6vmin; animation-delay: 0.9s; } .flower__light--5 { left: -1vmin; animation-delay: 1.5s; } .flower__light--6 { left: -4vmin; animation-delay: 3s; } .flower__light--7 { left: 3vmin; animation-delay: 2s; } .flower__light--8 { left: -6vmin; animation-delay: 3.5s; }
        .flower__grass { --c: #159faa; --line-w: 1.5vmin; position: absolute; bottom: 12vmin; left: -7vmin; display: flex; flex-direction: column; align-items: flex-end; z-index: 20; transform-origin: bottom center; transform: rotate(-48deg) rotateY(40deg); }
        .flower__grass--1 { animation: moving-grass 2s linear infinite; } .flower__grass--2 { left: 2vmin; bottom: 10vmin; transform: scale(0.5) rotate(75deg) rotateX(10deg) rotateY(-200deg); opacity: 0.8; z-index: 0; animation: moving-grass--2 1.5s linear infinite; } .flower__grass--top { width: 7vmin; height: 10vmin; border-top-right-radius: 100%; border-right: var(--line-w) solid var(--c); transform-origin: bottom center; transform: rotate(-2deg); } .flower__grass--bottom { margin-top: -2px; width: var(--line-w); height: 25vmin; background-image: linear-gradient(to top, transparent, var(--c)); } .flower__grass__leaf { --size: 10vmin; position: absolute; width: calc(var(--size) * 2.1); height: var(--size); border-top-left-radius: var(--size); border-top-right-radius: var(--size); background-image: linear-gradient(to top, transparent, transparent 30%, var(--c)); z-index: 100; }
        .flower__grass__leaf--1 { top: -6%; left: 30%; --size: 6vmin; transform: rotate(-20deg); animation: growing-grass-ans--1 2s 2.6s backwards; } .flower__grass__leaf--2 { top: -5%; left: -110%; --size: 6vmin; transform: rotate(10deg); animation: growing-grass-ans--2 2s 2.4s linear backwards; }
        .flower__grass__overlay { position: absolute; top: -10%; right: 0%; width: 100%; height: 100%; background-color: rgba(0,0,0,0.6); filter: blur(1.5vmin); z-index: 100; }
        .long-g { position: absolute; bottom: 25vmin; left: -42vmin; transform-origin: bottom left; } .long-g--1 { bottom: 0vmin; transform: scale(0.8) rotate(-5deg); } .long-g--1 .leaf { -webkit-mask-image: linear-gradient(to top, transparent 40%, #079097 80%) !important; } .long-g--1 .leaf--1 { --w: 5vmin; --h: 60vmin; left: -2vmin; transform: rotate(3deg) rotateY(-180deg); } .long-g--2, .long-g--3 { bottom: -3vmin; left: -35vmin; transform-origin: center; transform: scale(0.6) rotateX(60deg); } .long-g--2 .leaf, .long-g--3 .leaf { -webkit-mask-image: linear-gradient(to top, transparent 50%, #079097 80%) !important; } .long-g--2 .leaf--1 { left: -1vmin; transform: rotateY(-180deg); } .long-g--3 { left: -17vmin; bottom: 0vmin; } .long-g--5 { left: 42vmin; bottom: 0vmin; transform: scale(0.8) rotate(2deg); } .long-g .leaf { --w: 15vmin; --h: 40vmin; --c: #1aaa15; position: absolute; bottom: 0; width: var(--w); height: var(--h); border-top-left-radius: 100%; border-left: 2vmin solid var(--c); -webkit-mask-image: linear-gradient(to top, transparent 20%, var(--dark-color)); transform-origin: bottom center; } .long-g .leaf--0 { left: 2vmin; animation: leaf-ans-1 4s linear infinite; } .long-g .leaf--1 { --w: 5vmin; --h: 60vmin; animation: leaf-ans-1 4s linear infinite; }

        @keyframes moving-flower-1 { 0%, 100% { transform: rotate(2deg); } 50% { transform: rotate(-2deg); } } @keyframes moving-flower-2 { 0%, 100% { transform: rotate(18deg); } 50% { transform: rotate(14deg); } } @keyframes moving-flower-3 { 0%, 100% { transform: rotate(-18deg); } 50% { transform: rotate(-20deg) rotateY(-10deg); } } @keyframes blooming-flower { 0% { transform: scale(0); } } @keyframes grow-flower-tree { 0% { height: 0; border-radius: 1vmin; } } @keyframes blooming-leaf-right { 0% { transform-origin: left; transform: rotate(70deg) rotateY(30deg) scale(0); } } @keyframes blooming-leaf-left { 0% { transform-origin: right; transform: rotate(-70deg) rotateY(30deg) scale(0); } } @keyframes light-ans { 0% { opacity: 0; transform: translateY(0vmin); } 25% { opacity: 1; transform: translateY(-5vmin) translateX(-2vmin); } 50% { opacity: 1; transform: translateY(-15vmin) translateX(2vmin); filter: blur(0.2vmin); } 75% { transform: translateY(-20vmin) translateX(-2vmin); filter: blur(0.2vmin); } 100% { transform: translateY(-30vmin); opacity: 0; filter: blur(1vmin); } }
        @keyframes moving-grass { 0%, 100% { transform: rotate(-48deg) rotateY(40deg); } 50% { transform: rotate(-50deg) rotateY(40deg); } } @keyframes moving-grass--2 { 0%, 100% { transform: scale(0.5) rotate(75deg) rotateX(10deg) rotateY(-200deg); } 50% { transform: scale(0.5) rotate(79deg) rotateX(10deg) rotateY(-200deg); } } @keyframes growing-grass-ans--1 { 0% { transform-origin: bottom left; transform: rotate(-20deg) scale(0); } } @keyframes growing-grass-ans--2 { 0% { transform-origin: bottom right; transform: rotate(10deg) scale(0); } } @keyframes leaf-ans-1 { 0%, 100% { transform: rotate(-5deg) scale(1); } 50% { transform: rotate(5deg) scale(1.1); } } @keyframes rotarCarrusel { from { transform: perspective(1000px) rotateY(0deg); } to { transform: perspective(1000px) rotateY(360deg); } } @keyframes flotar { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } } @keyframes aparecer { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } } @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }

        /* Ajustes Mobile */
        @media (max-width: 768px) {
            h1 { font-size: 2.5rem; }
            .mensaje-poema { font-size: 1.4rem; top: 12%; }
            .contador-dias { font-size: 0.9rem; top: 25%; }
            .flowers-container { transform: scale(0.85) translateY(5%); }
            .carousel-container { width: 120px; height: 180px; }
            .titulo-flotante { font-size: 2rem; top: 10%; }
        }
        .not-loaded * { animation-play-state: paused !important; }
    </style>
</head>
<body class="not-loaded">

    <div id="login-overlay">
        <div class="login-card">
            <h2 style="font-family:'Dancing Script'; color:var(--accent); font-size:2rem; margin-bottom:10px;">Nuestra Fecha Especial</h2>
            <p style="color:#aaa; font-size:0.9rem;">Introduce el d√≠a que cambi√≥ todo...</p>
            
            <div class="date-inputs">
                <select id="day-select"></select>
                <select id="month-select">
                    <option value="1">Enero</option><option value="2">Febrero</option><option value="3">Marzo</option>
                    <option value="4">Abril</option><option value="5">Mayo</option><option value="6">Junio</option>
                    <option value="7">Julio</option><option value="8">Agosto</option><option value="9">Septiembre</option>
                    <option value="10">Octubre</option><option value="11">Noviembre</option><option value="12">Diciembre</option>
                </select>
                <select id="year-select">
                    <option value="2024">2024</option>
                    <option value="2025">2025</option>
                    <option value="2026">2026</option>
                </select>
            </div>

            <button class="unlock-btn" onclick="checkPassword()">Entrar ‚ù§Ô∏è</button>
            <div class="error-msg" id="error-msg">Fecha incorrecta, int√©ntalo de nuevo</div>
        </div>
    </div>

    <div id="music-overlay">
        <div class="music-card">
            <h2 style="font-family:'Pacifico'; color:#ff4d6d; font-size:2rem;">Playlist üéµ</h2>
            <p style="color:#aaa; margin-bottom:20px;">Elige una canci√≥n para comenzar...</p>
            <div class="song-list" id="song-list"></div>
        </div>
    </div>

    <div class="controls" id="controls">
        <button id="btn-next" class="btn-glass" onclick="siguienteEscena()">Siguiente ‚û°Ô∏è</button>
    </div>

    <div class="spotify-player" id="spotify-player">
        <div class="track-info">
            <div class="track-title" id="track-title">Selecciona canci√≥n</div>
            <div class="track-artist" id="track-artist">...</div>
        </div>
        <div class="player-controls">
            <button class="control-btn" onclick="prevSong()">‚èÆ</button>
            <button class="control-btn play-btn" onclick="togglePlayPause()" id="play-btn">‚ñ∂</button>
            <button class="control-btn" onclick="nextSong()">‚è≠</button>
        </div>
        <div class="progress-bar" id="progress-bar"></div>
    </div>

    <audio id="bg-music"></audio>

    <div id="universo" class="escena activa">
        <canvas id="starCanvas"></canvas>
        <div id="contenido-texto">
            <h1>Para mi Amor</h1>
            <div style="font-size:1.2rem; color:#eee; min-height:1.5em; margin-top:10px;">
                <span id="maquina-escribir"></span><span class="cursor" style="display:inline-block;width:2px;height:1em;background:white;animation:blink 1s infinite;"></span>
            </div>
        </div>
    </div>

    <div id="jardin" class="escena">
        <div class="night"></div>
        <div class="mensaje-poema">Bajo este cielo de luces infinitas,<br>mi coraz√≥n florece solo para ti.</div>
        <div id="contador-dias" class="contador-dias">Calculando...</div>
        <div class="flowers-container">
            <div class="flower-wrapper" style="left: 5%; transform: scale(0.5);"><div class="flower flower--2" style="left: -3vmin; transform: rotate(-15deg) scale(0.8); bottom: 1vmin;"><div class="flower__leafs flower__leafs--2"><div class="flower__leaf flower__leaf--1"></div><div class="flower__leaf flower__leaf--2"></div><div class="flower__leaf flower__leaf--3"></div><div class="flower__leaf flower__leaf--4"></div><div class="flower__white-circle"></div><div class="flower__light flower__light--1"></div><div class="flower__light flower__light--2"></div><div class="flower__light flower__light--3"></div><div class="flower__light flower__light--4"></div><div class="flower__light flower__light--5"></div><div class="flower__light flower__light--6"></div><div class="flower__light flower__light--7"></div><div class="flower__light flower__light--8"></div></div><div class="flower__line"><div class="flower__line__leaf flower__line__leaf--1"></div><div class="flower__line__leaf flower__line__leaf--2"></div><div class="flower__line__leaf flower__line__leaf--3"></div><div class="flower__line__leaf flower__line__leaf--4"></div></div></div><div class="flower flower--3" style="left: 3vmin; transform: rotate(15deg) scale(0.8); bottom: 1vmin;"><div class="flower__leafs flower__leafs--3"><div class="flower__leaf flower__leaf--1"></div><div class="flower__leaf flower__leaf--2"></div><div class="flower__leaf flower__leaf--3"></div><div class="flower__leaf flower__leaf--4"></div><div class="flower__white-circle"></div><div class="flower__light flower__light--1"></div><div class="flower__light flower__light--2"></div><div class="flower__light flower__light--3"></div><div class="flower__light flower__light--4"></div><div class="flower__light flower__light--5"></div><div class="flower__light flower__light--6"></div><div class="flower__light flower__light--7"></div><div class="flower__light flower__light--8"></div></div><div class="flower__line"><div class="flower__line__leaf flower__line__leaf--1"></div><div class="flower__line__leaf flower__line__leaf--2"></div><div class="flower__line__leaf flower__line__leaf--3"></div><div class="flower__line__leaf flower__line__leaf--4"></div></div></div><div class="flower flower--1" style="left: 0; bottom: 0; z-index: 2;"><div class="flower__leafs flower__leafs--1"><div class="flower__leaf flower__leaf--1"></div><div class="flower__leaf flower__leaf--2"></div><div class="flower__leaf flower__leaf--3"></div><div class="flower__leaf flower__leaf--4"></div><div class="flower__white-circle"></div><div class="flower__light flower__light--1"></div><div class="flower__light flower__light--2"></div><div class="flower__light flower__light--3"></div><div class="flower__light flower__light--4"></div><div class="flower__light flower__light--5"></div><div class="flower__light flower__light--6"></div><div class="flower__light flower__light--7"></div><div class="flower__light flower__light--8"></div></div><div class="flower__line"><div class="flower__line__leaf flower__line__leaf--1"></div><div class="flower__line__leaf flower__line__leaf--2"></div><div class="flower__line__leaf flower__line__leaf--3"></div><div class="flower__line__leaf flower__line__leaf--4"></div></div></div></div>
            <div class="flower-wrapper" style="left: 20%; transform: scale(0.7);"><div class="flower flower--3" style="left: -3vmin; transform: rotate(-10deg) scale(0.9); bottom: 1vmin;"><div class="flower__leafs flower__leafs--3"><div class="flower__leaf flower__leaf--1"></div><div class="flower__leaf flower__leaf--2"></div><div class="flower__leaf flower__leaf--3"></div><div class="flower__leaf flower__leaf--4"></div><div class="flower__white-circle"></div><div class="flower__light flower__light--1"></div><div class="flower__light flower__light--2"></div><div class="flower__light flower__light--3"></div><div class="flower__light flower__light--4"></div><div class="flower__light flower__light--5"></div><div class="flower__light flower__light--6"></div><div class="flower__light flower__light--7"></div><div class="flower__light flower__light--8"></div></div><div class="flower__line"><div class="flower__line__leaf flower__line__leaf--1"></div><div class="flower__line__leaf flower__line__leaf--2"></div><div class="flower__line__leaf flower__line__leaf--3"></div><div class="flower__line__leaf flower__line__leaf--4"></div></div></div><div class="flower flower--1" style="left: 3vmin; transform: rotate(10deg) scale(0.9); bottom: 1vmin;"><div class="flower__leafs flower__leafs--1"><div class="flower__leaf flower__leaf--1"></div><div class="flower__leaf flower__leaf--2"></div><div class="flower__leaf flower__leaf--3"></div><div class="flower__leaf flower__leaf--4"></div><div class="flower__white-circle"></div><div class="flower__light flower__light--1"></div><div class="flower__light flower__light--2"></div><div class="flower__light flower__light--3"></div><div class="flower__light flower__light--4"></div><div class="flower__light flower__light--5"></div><div class="flower__light flower__light--6"></div><div class="flower__light flower__light--7"></div><div class="flower__light flower__light--8"></div></div><div class="flower__line"><div class="flower__line__leaf flower__line__leaf--1"></div><div class="flower__line__leaf flower__line__leaf--2"></div><div class="flower__line__leaf flower__line__leaf--3"></div><div class="flower__line__leaf flower__line__leaf--4"></div></div></div><div class="flower flower--2" style="left: 0; bottom: 0; z-index: 2;"><div class="flower__leafs flower__leafs--2"><div class="flower__leaf flower__leaf--1"></div><div class="flower__leaf flower__leaf--2"></div><div class="flower__leaf flower__leaf--3"></div><div class="flower__leaf flower__leaf--4"></div><div class="flower__white-circle"></div><div class="flower__light flower__light--1"></div><div class="flower__light flower__light--2"></div><div class="flower__light flower__light--3"></div><div class="flower__light flower__light--4"></div><div class="flower__light flower__light--5"></div><div class="flower__light flower__light--6"></div><div class="flower__light flower__light--7"></div><div class="flower__light flower__light--8"></div></div><div class="flower__line"><div class="flower__line__leaf flower__line__leaf--1"></div><div class="flower__line__leaf flower__line__leaf--2"></div><div class="flower__line__leaf flower__line__leaf--3"></div><div class="flower__line__leaf flower__line__leaf--4"></div></div></div></div>
            <div class="flower-wrapper" style="left: 35%; transform: scale(0.85);"><div class="flower flower--1" style="left: -4vmin; transform: rotate(-12deg) scale(0.85); bottom: 1vmin;"><div class="flower__leafs flower__leafs--1"><div class="flower__leaf flower__leaf--1"></div><div class="flower__leaf flower__leaf--2"></div><div class="flower__leaf flower__leaf--3"></div><div class="flower__leaf flower__leaf--4"></div><div class="flower__white-circle"></div><div class="flower__light flower__light--1"></div><div class="flower__light flower__light--2"></div><div class="flower__light flower__light--3"></div><div class="flower__light flower__light--4"></div><div class="flower__light flower__light--5"></div><div class="flower__light flower__light--6"></div><div class="flower__light flower__light--7"></div><div class="flower__light flower__light--8"></div></div><div class="flower__line"><div class="flower__line__leaf flower__line__leaf--1"></div><div class="flower__line__leaf flower__line__leaf--2"></div><div class="flower__line__leaf flower__line__leaf--3"></div><div class="flower__line__leaf flower__line__leaf--4"></div></div></div><div class="flower flower--2" style="left: 4vmin; transform: rotate(12deg) scale(0.85); bottom: 1vmin;"><div class="flower__leafs flower__leafs--2"><div class="flower__leaf flower__leaf--1"></div><div class="flower__leaf flower__leaf--2"></div><div class="flower__leaf flower__leaf--3"></div><div class="flower__leaf flower__leaf--4"></div><div class="flower__white-circle"></div><div class="flower__light flower__light--1"></div><div class="flower__light flower__light--2"></div><div class="flower__light flower__light--3"></div><div class="flower__light flower__light--4"></div><div class="flower__light flower__light--5"></div><div class="flower__light flower__light--6"></div><div class="flower__light flower__light--7"></div><div class="flower__light flower__light--8"></div></div><div class="flower__line"><div class="flower__line__leaf flower__line__leaf--1"></div><div class="flower__line__leaf flower__line__leaf--2"></div><div class="flower__line__leaf flower__line__leaf--3"></div><div class="flower__line__leaf flower__line__leaf--4"></div></div></div><div class="flower flower--3" style="left: 0; bottom: 0; z-index: 2;"><div class="flower__leafs flower__leafs--3"><div class="flower__leaf flower__leaf--1"></div><div class="flower__leaf flower__leaf--2"></div><div class="flower__leaf flower__leaf--3"></div><div class="flower__leaf flower__leaf--4"></div><div class="flower__white-circle"></div><div class="flower__light flower__light--1"></div><div class="flower__light flower__light--2"></div><div class="flower__light flower__light--3"></div><div class="flower__light flower__light--4"></div><div class="flower__light flower__light--5"></div><div class="flower__light flower__light--6"></div><div class="flower__light flower__light--7"></div><div class="flower__light flower__light--8"></div></div><div class="flower__line"><div class="flower__line__leaf flower__line__leaf--1"></div><div class="flower__line__leaf flower__line__leaf--2"></div><div class="flower__line__leaf flower__line__leaf--3"></div><div class="flower__line__leaf flower__line__leaf--4"></div></div></div></div>
            <div class="flower-wrapper" style="left: 60%; transform: scale(0.85);"><div class="flower flower--3" style="left: -4vmin; transform: rotate(-12deg) scale(0.85); bottom: 1vmin;"><div class="flower__leafs flower__leafs--3"><div class="flower__leaf flower__leaf--1"></div><div class="flower__leaf flower__leaf--2"></div><div class="flower__leaf flower__leaf--3"></div><div class="flower__leaf flower__leaf--4"></div><div class="flower__white-circle"></div><div class="flower__light flower__light--1"></div><div class="flower__light flower__light--2"></div><div class="flower__light flower__light--3"></div><div class="flower__light flower__light--4"></div><div class="flower__light flower__light--5"></div><div class="flower__light flower__light--6"></div><div class="flower__light flower__light--7"></div><div class="flower__light flower__light--8"></div></div><div class="flower__line"><div class="flower__line__leaf flower__line__leaf--1"></div><div class="flower__line__leaf flower__line__leaf--2"></div><div class="flower__line__leaf flower__line__leaf--3"></div><div class="flower__line__leaf flower__line__leaf--4"></div></div></div><div class="flower flower--1" style="left: 4vmin; transform: rotate(12deg) scale(0.85); bottom: 1vmin;"><div class="flower__leafs flower__leafs--1"><div class="flower__leaf flower__leaf--1"></div><div class="flower__leaf flower__leaf--2"></div><div class="flower__leaf flower__leaf--3"></div><div class="flower__leaf flower__leaf--4"></div><div class="flower__white-circle"></div><div class="flower__light flower__light--1"></div><div class="flower__light flower__light--2"></div><div class="flower__light flower__light--3"></div><div class="flower__light flower__light--4"></div><div class="flower__light flower__light--5"></div><div class="flower__light flower__light--6"></div><div class="flower__light flower__light--7"></div><div class="flower__light flower__light--8"></div></div><div class="flower__line"><div class="flower__line__leaf flower__line__leaf--1"></div><div class="flower__line__leaf flower__line__leaf--2"></div><div class="flower__line__leaf flower__line__leaf--3"></div><div class="flower__line__leaf flower__line__leaf--4"></div></div></div><div class="flower flower--2" style="left: 0; bottom: 0; z-index: 2;"><div class="flower__leafs flower__leafs--2"><div class="flower__leaf flower__leaf--1"></div><div class="flower__leaf flower__leaf--2"></div><div class="flower__leaf flower__leaf--3"></div><div class="flower__leaf flower__leaf--4"></div><div class="flower__white-circle"></div><div class="flower__light flower__light--1"></div><div class="flower__light flower__light--2"></div><div class="flower__light flower__light--3"></div><div class="flower__light flower__light--4"></div><div class="flower__light flower__light--5"></div><div class="flower__light flower__light--6"></div><div class="flower__light flower__light--7"></div><div class="flower__light flower__light--8"></div></div><div class="flower__line"><div class="flower__line__leaf flower__line__leaf--1"></div><div class="flower__line__leaf flower__line__leaf--2"></div><div class="flower__line__leaf flower__line__leaf--3"></div><div class="flower__line__leaf flower__line__leaf--4"></div></div></div></div>
            <div class="flower-wrapper" style="left: 75%; transform: scale(0.7);"><div class="flower flower--2" style="left: -3vmin; transform: rotate(-10deg) scale(0.9); bottom: 1vmin;"><div class="flower__leafs flower__leafs--2"><div class="flower__leaf flower__leaf--1"></div><div class="flower__leaf flower__leaf--2"></div><div class="flower__leaf flower__leaf--3"></div><div class="flower__leaf flower__leaf--4"></div><div class="flower__white-circle"></div><div class="flower__light flower__light--1"></div><div class="flower__light flower__light--2"></div><div class="flower__light flower__light--3"></div><div class="flower__light flower__light--4"></div><div class="flower__light flower__light--5"></div><div class="flower__light flower__light--6"></div><div class="flower__light flower__light--7"></div><div class="flower__light flower__light--8"></div></div><div class="flower__line"><div class="flower__line__leaf flower__line__leaf--1"></div><div class="flower__line__leaf flower__line__leaf--2"></div><div class="flower__line__leaf flower__line__leaf--3"></div><div class="flower__line__leaf flower__line__leaf--4"></div></div></div><div class="flower flower--3" style="left: 3vmin; transform: rotate(10deg) scale(0.9); bottom: 1vmin;"><div class="flower__leafs flower__leafs--3"><div class="flower__leaf flower__leaf--1"></div><div class="flower__leaf flower__leaf--2"></div><div class="flower__leaf flower__leaf--3"></div><div class="flower__leaf flower__leaf--4"></div><div class="flower__white-circle"></div><div class="flower__light flower__light--1"></div><div class="flower__light flower__light--2"></div><div class="flower__light flower__light--3"></div><div class="flower__light flower__light--4"></div><div class="flower__light flower__light--5"></div><div class="flower__light flower__light--6"></div><div class="flower__light flower__light--7"></div><div class="flower__light flower__light--8"></div></div><div class="flower__line"><div class="flower__line__leaf flower__line__leaf--1"></div><div class="flower__line__leaf flower__line__leaf--2"></div><div class="flower__line__leaf flower__line__leaf--3"></div><div class="flower__line__leaf flower__line__leaf--4"></div></div></div><div class="flower flower--1" style="left: 0; bottom: 0; z-index: 2;"><div class="flower__leafs flower__leafs--1"><div class="flower__leaf flower__leaf--1"></div><div class="flower__leaf flower__leaf--2"></div><div class="flower__leaf flower__leaf--3"></div><div class="flower__leaf flower__leaf--4"></div><div class="flower__white-circle"></div><div class="flower__light flower__light--1"></div><div class="flower__light flower__light--2"></div><div class="flower__light flower__light--3"></div><div class="flower__light flower__light--4"></div><div class="flower__light flower__light--5"></div><div class="flower__light flower__light--6"></div><div class="flower__light flower__light--7"></div><div class="flower__light flower__light--8"></div></div><div class="flower__line"><div class="flower__line__leaf flower__line__leaf--1"></div><div class="flower__line__leaf flower__line__leaf--2"></div><div class="flower__line__leaf flower__line__leaf--3"></div><div class="flower__line__leaf flower__line__leaf--4"></div></div></div></div>
            <div class="flower-wrapper" style="left: 90%; transform: scale(0.5);"><div class="flower flower--1" style="left: -3vmin; transform: rotate(-15deg) scale(0.8); bottom: 1vmin;"><div class="flower__leafs flower__leafs--1"><div class="flower__leaf flower__leaf--1"></div><div class="flower__leaf flower__leaf--2"></div><div class="flower__leaf flower__leaf--3"></div><div class="flower__leaf flower__leaf--4"></div><div class="flower__white-circle"></div><div class="flower__light flower__light--1"></div><div class="flower__light flower__light--2"></div><div class="flower__light flower__light--3"></div><div class="flower__light flower__light--4"></div><div class="flower__light flower__light--5"></div><div class="flower__light flower__light--6"></div><div class="flower__light flower__light--7"></div><div class="flower__light flower__light--8"></div></div><div class="flower__line"><div class="flower__line__leaf flower__line__leaf--1"></div><div class="flower__line__leaf flower__line__leaf--2"></div><div class="flower__line__leaf flower__line__leaf--3"></div><div class="flower__line__leaf flower__line__leaf--4"></div></div></div><div class="flower flower--2" style="left: 3vmin; transform: rotate(15deg) scale(0.8); bottom: 1vmin;"><div class="flower__leafs flower__leafs--2"><div class="flower__leaf flower__leaf--1"></div><div class="flower__leaf flower__leaf--2"></div><div class="flower__leaf flower__leaf--3"></div><div class="flower__leaf flower__leaf--4"></div><div class="flower__white-circle"></div><div class="flower__light flower__light--1"></div><div class="flower__light flower__light--2"></div><div class="flower__light flower__light--3"></div><div class="flower__light flower__light--4"></div><div class="flower__light flower__light--5"></div><div class="flower__light flower__light--6"></div><div class="flower__light flower__light--7"></div><div class="flower__light flower__light--8"></div></div><div class="flower__line"><div class="flower__line__leaf flower__line__leaf--1"></div><div class="flower__line__leaf flower__line__leaf--2"></div><div class="flower__line__leaf flower__line__leaf--3"></div><div class="flower__line__leaf flower__line__leaf--4"></div></div></div><div class="flower flower--3" style="left: 0; bottom: 0; z-index: 2;"><div class="flower__leafs flower__leafs--3"><div class="flower__leaf flower__leaf--1"></div><div class="flower__leaf flower__leaf--2"></div><div class="flower__leaf flower__leaf--3"></div><div class="flower__leaf flower__leaf--4"></div><div class="flower__white-circle"></div><div class="flower__light flower__light--1"></div><div class="flower__light flower__light--2"></div><div class="flower__light flower__light--3"></div><div class="flower__light flower__light--4"></div><div class="flower__light flower__light--5"></div><div class="flower__light flower__light--6"></div><div class="flower__light flower__light--7"></div><div class="flower__light flower__light--8"></div></div><div class="flower__line"><div class="flower__line__leaf flower__line__leaf--1"></div><div class="flower__line__leaf flower__line__leaf--2"></div><div class="flower__line__leaf flower__line__leaf--3"></div><div class="flower__line__leaf flower__line__leaf--4"></div></div></div></div>
            <div class="growing-grass"><div class="flower__grass flower__grass--1"><div class="flower__grass--top"></div><div class="flower__grass--bottom"></div><div class="flower__grass__leaf flower__grass__leaf--1"></div><div class="flower__grass__leaf flower__grass__leaf--2"></div><div class="flower__grass__overlay"></div></div></div>
            <div class="growing-grass"><div class="flower__grass flower__grass--2"><div class="flower__grass--top"></div><div class="flower__grass--bottom"></div><div class="flower__grass__leaf flower__grass__leaf--1"></div><div class="flower__grass__leaf flower__grass__leaf--2"></div><div class="flower__grass__overlay"></div></div></div>
            <div class="long-g long-g--0"><div class="grow-ans" style="--d:3s"><div class="leaf leaf--0"></div></div><div class="grow-ans" style="--d:2.2s"><div class="leaf leaf--1"></div></div></div>
            <div class="long-g long-g--1"><div class="grow-ans" style="--d:3.6s"><div class="leaf leaf--0"></div></div><div class="grow-ans" style="--d:3.8s"><div class="leaf leaf--1"></div></div></div>
            <div class="long-g long-g--2"><div class="grow-ans" style="--d:4s"><div class="leaf leaf--0"></div></div><div class="grow-ans" style="--d:4.2s"><div class="leaf leaf--1"></div></div></div>
            <div class="long-g long-g--3"><div class="grow-ans" style="--d:4s"><div class="leaf leaf--0"></div></div><div class="grow-ans" style="--d:4.2s"><div class="leaf leaf--1"></div></div></div>
            <div class="long-g long-g--5"><div class="grow-ans" style="--d:4s"><div class="leaf leaf--0"></div></div><div class="grow-ans" style="--d:4.2s"><div class="leaf leaf--1"></div></div></div>
        </div>
    </div>

    <div id="corazon-scene" class="escena"><div class="titulo-flotante">Eres mi Todo</div><canvas id="heartCanvas"></canvas></div>
    <div id="galeria" class="escena"><div class="titulo-flotante" style="top: 10%; font-size: 2.5rem;">Nuestros Recuerdos</div><div class="carousel-container" id="carousel"></div></div>

    <script>
        const FRASES = ["Eres mi universo.", "Mi casualidad favorita.", "Te amo infinito."];
        const FOTOS = ["foto1.jpeg", "foto2.jpeg", "foto3.jpeg", "foto4.jpeg", "foto5.jpeg"];
        const FECHA_INICIO = new Date("2025-10-25T00:00:00");
        const PLAYLIST = [
            { titulo: "Hurac√°n", artista: "Funzo & BabyLoud", archivo: "cancion1.mp3" },
            { titulo: "Yellow", artista: "Coldplay", archivo: "cancion2.mp3" },
            { titulo: "Lo que pido", artista: "DePol", archivo: "cancion3.mp3" },
            { titulo: "12x3", artista: "DEKKO", archivo: "cancion4.mp3" }
        ];

        let escenaActual = 0;
        let currentSongIndex = 0;
        const escenasIds = ['universo', 'jardin', 'corazon-scene', 'galeria'];
        const audio = document.getElementById('bg-music');

        // --- SISTEMA LOGIN ---
        // Llenar selectores de fecha
        const daySelect = document.getElementById('day-select');
        for(let i=1; i<=31; i++) {
            let opt = document.createElement('option');
            opt.value = i;
            opt.innerText = i;
            daySelect.appendChild(opt);
        }

        function checkPassword() {
            const d = document.getElementById('day-select').value;
            const m = document.getElementById('month-select').value;
            const y = document.getElementById('year-select').value;

            if (d == 25 && m == 10 && y == 2025) {
                // Correcto
                document.getElementById('login-overlay').style.opacity = '0';
                document.getElementById('login-overlay').style.visibility = 'hidden';
                
                // Mostrar Music Overlay con efecto
                setTimeout(() => {
                    document.getElementById('music-overlay').style.display = 'flex';
                    setTimeout(() => document.getElementById('music-overlay').style.opacity = '1', 50);
                }, 800);
            } else {
                // Incorrecto - Temblor
                const card = document.querySelector('.login-card');
                card.style.animation = 'shake 0.3s';
                document.getElementById('error-msg').style.opacity = '1';
                setTimeout(() => card.style.animation = '', 300);
            }
        }

        // --- SISTEMA M√öSICA ---
        function initPlaylist() {
            const list = document.getElementById('song-list');
            PLAYLIST.forEach((song, index) => {
                const btn = document.createElement('div');
                btn.className = 'song-btn';
                btn.innerHTML = `<span style="font-size:1.2rem;color:var(--accent)">‚ñ∂</span>
                                 <div><div style="font-weight:bold">${song.titulo}</div>
                                 <div style="font-size:0.8rem;color:#ccc">${song.artista}</div></div>`;
                btn.onclick = () => startExperience(index);
                list.appendChild(btn);
            });
        }

        function startExperience(index) {
            loadSong(index);
            document.getElementById('music-overlay').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('music-overlay').style.display = 'none';
                document.getElementById('spotify-player').classList.add('visible');
                document.getElementById('controls').style.opacity = '1';
            }, 800);

            // Iniciar animaciones
            document.body.classList.remove('not-loaded');
            initStars(); animateStars(); typeWriter();
            actualizarContador(); setInterval(actualizarContador, 60000);
        }

        function loadSong(index) {
            currentSongIndex = index;
            const song = PLAYLIST[currentSongIndex];
            audio.src = song.archivo;
            document.getElementById('track-title').innerText = song.titulo;
            document.getElementById('track-artist').innerText = song.artista;
            audio.play().then(() => updatePlayIcon(true)).catch(e => console.log("Click necesario"));
        }

        function togglePlayPause() {
            if (audio.paused) {
                audio.play();
                updatePlayIcon(true);
            } else {
                audio.pause();
                updatePlayIcon(false);
            }
        }

        function updatePlayIcon(isPlaying) {
            const btn = document.getElementById('play-btn');
            btn.innerText = isPlaying ? "‚è∏" : "‚ñ∂";
        }

        function nextSong() {
            currentSongIndex = (currentSongIndex + 1) % PLAYLIST.length;
            loadSong(currentSongIndex);
        }

        function prevSong() {
            currentSongIndex = (currentSongIndex - 1 + PLAYLIST.length) % PLAYLIST.length;
            loadSong(currentSongIndex);
        }

        audio.ontimeupdate = () => {
            const progress = (audio.currentTime / audio.duration) * 100;
            document.getElementById('progress-bar').style.width = `${progress}%`;
        };

        audio.onended = () => nextSong();

        // --- NAVEGACI√ìN ---
        function siguienteEscena() {
            document.getElementById(escenasIds[escenaActual]).classList.remove('activa');
            escenaActual = (escenaActual + 1) % escenasIds.length;
            document.getElementById(escenasIds[escenaActual]).classList.add('activa');
            if(escenaActual === 0) { initStars(); animateStars(); }
            if(escenaActual === 2) { initHeart(); animateHeart(); }
            if(escenaActual === 3) { crearCarrusel(); }
        }

        function actualizarContador() {
            const dias = Math.floor((new Date() - FECHA_INICIO) / (1000 * 60 * 60 * 24));
            document.getElementById('contador-dias').innerText = `Juntos desde el 25 Oct 2025 (${dias} d√≠as)`;
        }

        // --- CANVAS (Stars & Heart) ---
        const starCanvas = document.getElementById('starCanvas'); const sCtx = starCanvas.getContext('2d'); let stars = [];
        function initStars() { starCanvas.width = window.innerWidth; starCanvas.height = window.innerHeight; stars = []; for(let i=0; i<300; i++) stars.push({x:Math.random()*starCanvas.width, y:Math.random()*starCanvas.height, z:Math.random()*starCanvas.width}); }
        function animateStars() { if(!document.getElementById('universo').classList.contains('activa')) return; sCtx.fillStyle = "black"; sCtx.fillRect(0,0,starCanvas.width, starCanvas.height); sCtx.fillStyle = "white"; stars.forEach(s => { s.z -= 2; if(s.z <= 0) s.z = starCanvas.width; let x = (s.x-starCanvas.width/2)*(starCanvas.width/s.z)+starCanvas.width/2; let y = (s.y-starCanvas.height/2)*(starCanvas.width/s.z)+starCanvas.height/2; let size = (1-s.z/starCanvas.width)*2; if(x>0 && x<starCanvas.width && y>0 && y<starCanvas.height) { sCtx.beginPath(); sCtx.arc(x,y,size,0,Math.PI*2); sCtx.fill(); } }); requestAnimationFrame(animateStars); }

        const hCanvas = document.getElementById('heartCanvas'); const hCtx = hCanvas.getContext('2d'); let hPoints = []; let angY = 0;
        function initHeart() { hCanvas.width = window.innerWidth; hCanvas.height = window.innerHeight; hPoints = []; for(let i=0; i<1200; i++) { let t = Math.random()*Math.PI*2, x = 16*Math.pow(Math.sin(t),3), y = -(13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t)); let z = (Math.random()-0.5)*10; hPoints.push({x:x*10, y:y*10, z:z*10, color: `hsl(${330+Math.random()*40}, 90%, 60%)`}); } }
        function animateHeart() { if(!document.getElementById('corazon-scene').classList.contains('activa')) return; hCtx.fillStyle = "rgba(0,0,0,0.2)"; hCtx.fillRect(0,0,hCanvas.width, hCanvas.height); angY += 0.015; let cx = hCanvas.width/2, cy = hCanvas.height/2; let scaleFactor = window.innerWidth < 768 ? 300 : 500; hPoints.forEach(p => { let rx = p.x*Math.cos(angY) - p.z*Math.sin(angY); let rz = p.x*Math.sin(angY) + p.z*Math.cos(angY); let scale = scaleFactor/(scaleFactor+rz); if(scale>0) { hCtx.fillStyle = p.color; hCtx.beginPath(); hCtx.arc(rx*scale+cx, p.y*scale+cy, 1.5*scale, 0, Math.PI*2); hCtx.fill(); } }); requestAnimationFrame(animateHeart); }

        function crearCarrusel() { const container = document.getElementById('carousel'); if(container.children.length > 0) return; const radius = window.innerWidth < 768 ? 180 : 300; const angleStep = 360/FOTOS.length; FOTOS.forEach((src, i) => { const div = document.createElement('div'); div.className = 'foto-card'; div.style.transform = `rotateY(${i*angleStep}deg) translateZ(${radius}px)`; div.innerHTML = `<img src="${src}">`; container.appendChild(div); }); }

        let tIdx=0, cIdx=0, isDel=false;
        function typeWriter() { const txt = FRASES[tIdx]; const el = document.getElementById('maquina-escribir'); el.innerText = isDel ? txt.substring(0, cIdx--) : txt.substring(0, cIdx++); let spd = isDel ? 50 : 100; if(!isDel && cIdx === txt.length+1) { spd = 2000; isDel = true; } else if(isDel && cIdx === 0) { isDel = false; tIdx = (tIdx+1)%FRASES.length; spd = 500; } setTimeout(typeWriter, spd); }

        window.onload = () => { initPlaylist(); };
        window.addEventListener('resize', () => { initStars(); initHeart(); });
    </script>
</body>
</html>



