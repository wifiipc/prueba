<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Para ti ‚ù§Ô∏è</title>
    <style>
        /* --- FUENTES --- */
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;500;700&family=Dancing+Script:wght@700&family=Pacifico&display=swap');

        /* --- ESTILOS GENERALES --- */
        body {
            margin: 0;
            overflow: hidden;
            background-color: #000;
            font-family: 'Montserrat', sans-serif;
            color: white;
            height: 100vh;
            width: 100vw;
            perspective: 1000px; /* Para el 3D */
        }

        /* --- BOTONES DE CONTROL --- */
        .controls {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            gap: 10px;
        }

        .btn-glass {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            border-radius: 30px;
            cursor: pointer;
            backdrop-filter: blur(5px);
            transition: all 0.3s;
            font-weight: bold;
            box-shadow: 0 0 10px rgba(255,255,255,0.1);
            font-size: 0.9rem;
        }
        
        .btn-glass:hover {
            background: #ff4d6d;
            border-color: #ff4d6d;
            box-shadow: 0 0 20px #ff4d6d;
            transform: scale(1.05);
        }

        /* --- ESCENAS --- */
        .escena {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            pointer-events: none;
            transition: opacity 1s ease, transform 1s ease;
            display: flex;
            justify-content: center;
            align-items: center;
            transform: scale(1.2); /* Efecto zoom out al estar oculta */
        }

        .activa {
            opacity: 1;
            pointer-events: all;
            transform: scale(1);
        }

        /* --- ESCENA 1: UNIVERSO --- */
        #universo { background: black; }
        #starCanvas { position: absolute; z-index: 1; }
        #contenido-texto {
            position: relative;
            z-index: 10;
            text-align: center;
            background: rgba(0, 0, 0, 0.4);
            padding: 40px;
            border-radius: 20px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        h1 {
            font-family: 'Dancing Script', cursive;
            font-size: 4rem;
            color: #ff4d6d;
            text-shadow: 0 0 20px #ff4d6d;
            margin: 0;
        }
        #maquina-escribir {
            font-size: 1.5rem;
            color: #eee;
            min-height: 1.5em;
        }

        /* --- ESCENA 2: JARD√çN --- */
        #jardin {
            background: linear-gradient(to bottom, #1a0b14, #2d1b2e); /* Fondo noche rom√°ntica */
            flex-direction: column;
        }
        canvas#arbolCanvas { z-index: 2; margin-bottom: 20px; }
        .tarjeta {
            background: rgba(255, 255, 255, 0.9);
            padding: 20px 40px;
            border-radius: 15px;
            text-align: center;
            color: #5c3a45;
            max-width: 80%;
            z-index: 3;
            box-shadow: 0 0 30px rgba(255, 77, 109, 0.3);
        }

        /* --- ESCENA 3: CORAZ√ìN 3D --- */
        #corazon-scene {
            background: radial-gradient(circle, #1a0b14 0%, #000000 100%);
            flex-direction: column;
            overflow: hidden;
        }
        #heartCanvas { position: absolute; z-index: 1; }
        .titulo-flotante {
            position: absolute;
            top: 15%;
            font-family: 'Pacifico', cursive;
            font-size: 3rem;
            color: #ff99ac;
            text-shadow: 0 0 20px #ff006e;
            z-index: 10;
            animation: flotar 3s ease-in-out infinite;
        }

        /* --- ESCENA 4: CARRUSEL DE FOTOS 3D --- */
        #galeria {
            background: #000;
            overflow: hidden;
        }
        
        .carousel-container {
            position: relative;
            width: 200px;
            height: 300px;
            transform-style: preserve-3d;
            animation: rotarCarrusel 20s infinite linear;
        }

        .carousel-container:hover {
            animation-play-state: paused; /* Se para si pasas el rat√≥n */
        }

        .foto-card {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255,255,255,0.1);
            border: 2px solid #ff4d6d;
            border-radius: 10px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
            box-shadow: 0 0 20px rgba(255, 77, 109, 0.5);
            /* Cada foto se rotar√° por JS */
        }

        .foto-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        @keyframes rotarCarrusel {
            from { transform: perspective(1000px) rotateY(0deg); }
            to { transform: perspective(1000px) rotateY(360deg); }
        }

        @keyframes flotar { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }
        
        /* Cursor */
        .cursor { display: inline-block; width: 2px; height: 1.2em; background: white; animation: blink 1s infinite; }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }

    </style>
</head>
<body>

    <div class="controls">
        <button id="btn-music" class="btn-glass" onclick="toggleMusic()">üéµ M√∫sica: Off</button>
        <button id="btn-next" class="btn-glass" onclick="siguienteEscena()">Ver Jard√≠n üå±</button>
    </div>

    <audio id="bg-music" loop>
        <source src="tu_cancion.mp3" type="audio/mpeg">
    </audio>

    <div id="universo" class="escena activa">
        <canvas id="starCanvas"></canvas>
        <div id="contenido-texto">
            <h1>Para mi Amor</h1>
            <div><span id="maquina-escribir"></span><span class="cursor"></span></div>
        </div>
    </div>

    <div id="jardin" class="escena">
        <canvas id="arbolCanvas"></canvas>
        <div class="tarjeta">
            <p style="font-style: italic; font-size: 1.1rem;">"Mis ra√≠ces buscan tu tierra,<br>mis hojas buscan tu luz."</p>
            <div style="font-size: 0.8rem; text-transform: uppercase; margin-top: 10px; color: #ff4d6d; font-weight:bold;">
                Juntos desde el 25/10/2025
            </div>
            <div id="reloj" style="font-weight:bold; margin-top:5px;">Calculando...</div>
        </div>
    </div>

    <div id="corazon-scene" class="escena">
        <div class="titulo-flotante">Eres mi Todo</div>
        <canvas id="heartCanvas"></canvas>
    </div>

    <div id="galeria" class="escena">
        <div class="titulo-flotante" style="top: 10%; font-size: 2.5rem;">Nuestros Recuerdos</div>
        <div class="carousel-container" id="carousel">
            </div>
        <div style="position: absolute; bottom: 10%; color: #ccc; font-size: 0.9rem;">
            (Pasa el rat√≥n para detener el giro)
        </div>
    </div>

    <script>
        /* =========================================
           CONFIGURACI√ìN
           ========================================= */
        const FECHA_INICIO = new Date("2025-10-25T00:00:00");
        const FRASES = ["Eres mi universo.", "Mi lugar favorito.", "Te amo infinito."];
        
        // FOTOS PARA EL CARRUSEL (Puedes poner URLs reales aqu√≠)
        // Ejemplo: "foto1.jpg", "foto2.jpg"...
        const FOTOS = [
            "https://via.placeholder.com/200x300/ff4d6d/fff?text=Foto+1",
            "https://via.placeholder.com/200x300/ff4d6d/fff?text=Foto+2",
            "https://via.placeholder.com/200x300/ff4d6d/fff?text=Foto+3",
            "https://via.placeholder.com/200x300/ff4d6d/fff?text=Foto+4",
            "https://via.placeholder.com/200x300/ff4d6d/fff?text=Foto+5",
            "https://via.placeholder.com/200x300/ff4d6d/fff?text=Foto+6"
        ];

        /* =========================================
           L√ìGICA DE ESCENAS
           ========================================= */
        let escenaActual = 0;
        const escenasIds = ['universo', 'jardin', 'corazon-scene', 'galeria'];

        function siguienteEscena() {
            // Ocultar actual
            document.getElementById(escenasIds[escenaActual]).classList.remove('activa');
            
            // Siguiente
            escenaActual = (escenaActual + 1) % escenasIds.length;
            
            // Mostrar nueva
            const nueva = document.getElementById(escenasIds[escenaActual]);
            nueva.classList.add('activa');
            
            // Actualizar bot√≥n
            const btn = document.getElementById('btn-next');
            if(escenaActual === 0) { btn.innerText = "Ver Jard√≠n üå±"; initStars(); animateStars(); }
            else if(escenaActual === 1) { btn.innerText = "Ver Coraz√≥n üíñ"; growth=0; drawTree(); }
            else if(escenaActual === 2) { btn.innerText = "Ver Recuerdos üì∏"; initHeart(); animateHeart(); }
            else { btn.innerText = "Volver al Inicio ‚ú®"; crearCarrusel(); }
        }

        /* =========================================
           M√öSICA
           ========================================= */
        function toggleMusic() {
            const audio = document.getElementById('bg-music');
            const btn = document.getElementById('btn-music');
            if (audio.paused) {
                audio.play();
                btn.innerText = "üéµ M√∫sica: On";
                btn.style.background = "#ff4d6d";
            } else {
                audio.pause();
                btn.innerText = "üéµ M√∫sica: Off";
                btn.style.background = "rgba(255,255,255,0.1)";
            }
        }

        /* =========================================
           1. UNIVERSO
           ========================================= */
        const starCanvas = document.getElementById('starCanvas');
        const sCtx = starCanvas.getContext('2d');
        let stars = [];

        function initStars() {
            starCanvas.width = window.innerWidth;
            starCanvas.height = window.innerHeight;
            stars = [];
            for(let i=0; i<300; i++) stars.push({
                x: Math.random() * starCanvas.width - starCanvas.width/2,
                y: Math.random() * starCanvas.height - starCanvas.height/2,
                z: Math.random() * starCanvas.width
            });
        }

        function animateStars() {
            if(!document.getElementById('universo').classList.contains('activa')) return;
            sCtx.fillStyle = "rgba(0,0,0,0.3)"; sCtx.fillRect(0,0,starCanvas.width, starCanvas.height);
            sCtx.fillStyle = "white";
            stars.forEach(s => {
                s.z -= 5;
                if(s.z <= 0) { s.z = starCanvas.width; s.x = Math.random()*starCanvas.width - starCanvas.width/2; s.y = Math.random()*starCanvas.height - starCanvas.height/2; }
                let x = (s.x / s.z) * starCanvas.width + starCanvas.width/2;
                let y = (s.y / s.z) * starCanvas.height + starCanvas.height/2;
                let size = (1 - s.z/starCanvas.width) * 3;
                if(x>0 && x<starCanvas.width && y>0 && y<starCanvas.height) { sCtx.beginPath(); sCtx.arc(x,y,size,0,Math.PI*2); sCtx.fill(); }
            });
            requestAnimationFrame(animateStars);
        }

        /* =========================================
           2. JARD√çN (BONS√ÅI)
           ========================================= */
        const treeCanvas = document.getElementById('arbolCanvas');
        const tCtx = treeCanvas.getContext('2d');
        let growth = 0;

        function drawTree() {
            if(!document.getElementById('jardin').classList.contains('activa')) return;
            treeCanvas.width = 350; treeCanvas.height = 400;
            if(growth < 1) growth += 0.01;
            drawBranch(175, 400, 80 * growth, 0, 12);
            requestAnimationFrame(drawTree);
        }

        function drawBranch(x, y, len, angle, width) {
            tCtx.save(); tCtx.translate(x, y); tCtx.rotate(angle * Math.PI/180);
            tCtx.beginPath(); tCtx.moveTo(0,0); tCtx.lineTo(0, -len);
            tCtx.strokeStyle = "#4a3b2a"; tCtx.lineWidth = width; tCtx.lineCap = "round"; tCtx.stroke();
            
            if(len < 20 && len > 0) {
                // Hojas verdes y flores rosas (estilo bons√°i)
                tCtx.fillStyle = Math.random() > 0.5 ? "#ff8fa3" : "#556b2f"; 
                tCtx.beginPath(); tCtx.arc(0, -len, 5, 0, Math.PI*2); tCtx.fill();
            }
            if(len > 10) {
                tCtx.translate(0, -len);
                drawBranch(0, 0, len*0.75, 25+Math.random()*10, width*0.7);
                drawBranch(0, 0, len*0.75, -25-Math.random()*10, width*0.7);
            }
            tCtx.restore();
        }

        /* =========================================
           3. CORAZ√ìN 3D
           ========================================= */
        const hCanvas = document.getElementById('heartCanvas');
        const hCtx = hCanvas.getContext('2d');
        let hPoints = []; let angleY = 0;

        function initHeart() {
            hCanvas.width = window.innerWidth; hCanvas.height = window.innerHeight;
            hPoints = [];
            for(let i=0; i<1000; i++) {
                let t = Math.random() * Math.PI * 2, r = Math.random();
                let x = 16 * Math.pow(Math.sin(t), 3);
                let y = -(13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t));
                let z = (Math.random()-0.5)*10; 
                hPoints.push({x: x*10, y: y*10, z: z*10, color: `hsl(${330+Math.random()*30}, 80%, 60%)`});
            }
        }

        function animateHeart() {
            if(!document.getElementById('corazon-scene').classList.contains('activa')) return;
            hCtx.fillStyle = "rgba(0,0,0,0.1)"; hCtx.fillRect(0,0,hCanvas.width, hCanvas.height);
            angleY += 0.02;
            let cx = hCanvas.width/2, cy = hCanvas.height/2;
            
            hPoints.forEach(p => {
                let rx = p.x * Math.cos(angleY) - p.z * Math.sin(angleY);
                let rz = p.x * Math.sin(angleY) + p.z * Math.cos(angleY);
                let scale = 400 / (400 + rz);
                let x2d = rx * scale + cx, y2d = p.y * scale + cy;
                if(scale > 0) {
                    hCtx.fillStyle = p.color; hCtx.beginPath(); hCtx.arc(x2d, y2d, scale*2, 0, Math.PI*2); hCtx.fill();
                }
            });
            requestAnimationFrame(animateHeart);
        }

        /* =========================================
           4. CARRUSEL 3D
           ========================================= */
        function crearCarrusel() {
            const container = document.getElementById('carousel');
            if(container.children.length > 0) return; // Ya creado

            const radius = 250; // Radio del c√≠rculo
            const angleStep = 360 / FOTOS.length;

            FOTOS.forEach((src, i) => {
                const card = document.createElement('div');
                card.className = 'foto-card';
                // Posicionar en c√≠rculo 3D
                const theta = i * angleStep;
                card.style.transform = `rotateY(${theta}deg) translateZ(${radius}px)`;
                
                // Contenido (Imagen)
                card.innerHTML = `<img src="${src}" alt="Foto ${i+1}">`;
                container.appendChild(card);
            });
        }

        /* =========================================
           INIT
           ========================================= */
        let tIdx = 0, cIdx = 0, isDel = false;
        function typeWriter() {
            const txt = FRASES[tIdx];
            const el = document.getElementById('maquina-escribir');
            el.innerText = isDel ? txt.substring(0, cIdx--) : txt.substring(0, cIdx++);
            let spd = isDel ? 50 : 100;
            if(!isDel && cIdx === txt.length+1) { spd = 2000; isDel = true; }
            else if(isDel && cIdx === 0) { isDel = false; tIdx = (tIdx+1)%FRASES.length; spd = 500; }
            setTimeout(typeWriter, spd);
        }

        function updateClock() {
            const diff = new Date() - FECHA_INICIO;
            const d = Math.floor(diff/(1000*60*60*24));
            const h = Math.floor((diff%(1000*60*60*24))/(1000*60*60));
            document.getElementById('reloj').innerText = `${d} D√≠as, ${h} Horas juntos`;
        }

        window.onload = () => {
            initStars(); animateStars();
            typeWriter();
            setInterval(updateClock, 1000);
        };
        window.addEventListener('resize', () => { initStars(); initHeart(); });

    </script>
</body>
</html>
